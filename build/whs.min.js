var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.inherits=function(e,d){function q(){}q.prototype=d.prototype;e.superClass_=d.prototype;e.prototype=new q;e.prototype.constructor=e;for(var t in d)if(Object.defineProperties){var k=Object.getOwnPropertyDescriptor(d,t);k&&Object.defineProperty(e,t,k)}else e[t]=d[t]};$jscomp.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:"undefined"!=typeof global&&null!=global?global:e};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;
$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,d,q){e!=Array.prototype&&e!=Object.prototype&&(e[d]=q.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(e){return $jscomp.SYMBOL_PREFIX+(e||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var e=$jscomp.global.Symbol.iterator;e||(e=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[e]&&$jscomp.defineProperty(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(e){var d=0;return $jscomp.iteratorPrototype(function(){return d<e.length?{done:!1,value:e[d++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(e){$jscomp.initSymbolIterator();e={next:e};e[$jscomp.global.Symbol.iterator]=function(){return this};return e};$jscomp.makeIterator=function(e){$jscomp.initSymbolIterator();var d=e[Symbol.iterator];return d?d.call(e):$jscomp.arrayIterator(e)};$jscomp.owns=function(e,d){return Object.prototype.hasOwnProperty.call(e,d)};
$jscomp.polyfill=function(e,d,q,t){if(d){q=$jscomp.global;e=e.split(".");for(t=0;t<e.length-1;t++){var k=e[t];k in q||(q[k]={});q=q[k]}e=e[e.length-1];t=q[e];d=d(t);d!=t&&null!=d&&$jscomp.defineProperty(q,e,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Object.assign",function(e){return e?e:function(d,e){for(var q=1;q<arguments.length;q++){var k=arguments[q];if(k)for(var z in k)$jscomp.owns(k,z)&&(d[z]=k[z])}return d}},"es6-impl","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(e){function d(){this.batch_=null}function q(d){return d instanceof k?d:new k(function(e,v){e(d)})}if(e&&!$jscomp.FORCE_POLYFILL_PROMISE)return e;d.prototype.asyncExecute=function(d){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(d);return this};d.prototype.asyncExecuteBatch_=function(){var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})};var t=$jscomp.global.setTimeout;d.prototype.asyncExecuteFunction=function(d){t(d,
0)};d.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=this.batch_;this.batch_=[];for(var e=0;e<d.length;++e){var k=d[e];delete d[e];try{k()}catch(F){this.asyncThrow_(F)}}}this.batch_=null};d.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var k=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var e=this.createResolveAndReject_();try{d(e.resolve,e.reject)}catch(E){e.reject(E)}};k.prototype.createResolveAndReject_=
function(){function d(d){return function(v){k||(k=!0,d.call(e,v))}}var e=this,k=!1;return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};k.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof k)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var e=null!=d;break a;case "function":e=!0;break a;default:e=!1}e?this.resolveToNonPromiseObj_(d):this.fulfill_(d)}};k.prototype.resolveToNonPromiseObj_=function(d){var e=
void 0;try{e=d.then}catch(E){this.reject_(E);return}"function"==typeof e?this.settleSameAsThenable_(e,d):this.fulfill_(d)};k.prototype.reject_=function(d){this.settle_(2,d)};k.prototype.fulfill_=function(d){this.settle_(1,d)};k.prototype.settle_=function(d,e){if(0!=this.state_)throw Error("Cannot settle("+d+", "+e|"): Promise already settled in state"+this.state_);this.state_=d;this.result_=e;this.executeOnSettledCallbacks_()};k.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var d=
this.onSettledCallbacks_,e=0;e<d.length;++e)d[e].call(),d[e]=null;this.onSettledCallbacks_=null}};var z=new d;k.prototype.settleSameAsPromise_=function(d){var e=this.createResolveAndReject_();d.callWhenSettled_(e.resolve,e.reject)};k.prototype.settleSameAsThenable_=function(d,e){var k=this.createResolveAndReject_();try{d.call(e,k.resolve,k.reject)}catch(F){k.reject(F)}};k.prototype.then=function(d,e){function q(d,e){return"function"==typeof d?function(e){try{t(d(e))}catch(u){v(u)}}:e}var t,v,g=new k(function(d,
e){t=d;v=e});this.callWhenSettled_(q(d,t),q(e,v));return g};k.prototype.catch=function(d){return this.then(void 0,d)};k.prototype.callWhenSettled_=function(d,e){function k(){switch(q.state_){case 1:d(q.result_);break;case 2:e(q.result_);break;default:throw Error("Unexpected state: "+q.state_);}}var q=this;null==this.onSettledCallbacks_?z.asyncExecute(k):this.onSettledCallbacks_.push(function(){z.asyncExecute(k)})};k.resolve=q;k.reject=function(d){return new k(function(e,k){k(d)})};k.race=function(d){return new k(function(e,
k){for(var t=$jscomp.makeIterator(d),v=t.next();!v.done;v=t.next())q(v.value).callWhenSettled_(e,k)})};k.all=function(d){var e=$jscomp.makeIterator(d),t=e.next();return t.done?q([]):new k(function(d,k){function g(e){return function(g){h[e]=g;v--;0==v&&d(h)}}var h=[],v=0;do h.push(void 0),v++,q(t.value).callWhenSettled_(g(h.length-1),k),t=e.next();while(!t.done)})};return k},"es6-impl","es3");
$jscomp.iteratorFromArray=function(e,d){$jscomp.initSymbolIterator();e instanceof String&&(e+="");var q=0,t={next:function(){if(q<e.length){var k=q++;return{value:d(k,e[k]),done:!1}}t.next=function(){return{done:!0,value:void 0}};return t.next()}};t[Symbol.iterator]=function(){return t};return t};$jscomp.polyfill("Array.prototype.keys",function(e){return e?e:function(){return $jscomp.iteratorFromArray(this,function(d){return d})}},"es6-impl","es3");
$jscomp.checkStringArgs=function(e,d,q){if(null==e)throw new TypeError("The 'this' value for String.prototype."+q+" must not be null or undefined");if(d instanceof RegExp)throw new TypeError("First argument to String.prototype."+q+" must not be a regular expression");return e+""};
$jscomp.polyfill("String.prototype.repeat",function(e){return e?e:function(d){var e=$jscomp.checkStringArgs(this,null,"repeat");if(0>d||1342177279<d)throw new RangeError("Invalid count value");d|=0;for(var t="";d;)if(d&1&&(t+=e),d>>>=1)e+=e;return t}},"es6-impl","es3");
(function(e,d){"object"===typeof exports&&"undefined"!==typeof module?d(exports,require("three")):"function"===typeof define&&define.amd?define(["exports","three"],d):d(e.WHS=e.WHS||{},e.THREE)})(this,function(e,d){function q(d,e,g){function c(b){if("function"!==typeof b)throw Error("Expected listener to be a function.");var a=!0;J===f&&(J=f.slice());J.push(b);return function(){if(a){a=!1;J===f&&(J=f.slice());var p=J.indexOf(b);J.splice(p,1)}}}function a(b){var a;if(a=null!=b&&"object"==typeof b){if(null==
b)var c=void 0===b?"[object Undefined]":"[object Null]";else if(wa&&wa in Object(b)){a=Sb.call(b,K);var d=b[K];try{b[K]=void 0,c=!0}catch(Xc){}var e=Tb.call(b);c&&(a?b[K]=d:delete b[K]);c=e}else c=Ub.call(b);a="[object Object]"==c}a?(c=Vb(b),null===c?c=!0:(c=Wb.call(c,"constructor")&&c.constructor,c="function"==typeof c&&c instanceof c&&xa.call(c)==Xb)):c=!1;if(!c)throw Error("Actions must be plain objects. Use custom middleware for async actions.");if("undefined"===typeof b.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');
if(X)throw Error("Reducers may not dispatch actions.");try{X=!0,w=p(w,b)}finally{X=!1}c=f=J;for(a=0;a<c.length;a++)(0,c[a])();return b}var b;"function"===typeof e&&"undefined"===typeof g&&(g=e,e=void 0);if("undefined"!==typeof g){if("function"!==typeof g)throw Error("Expected the enhancer to be a function.");return g(q)(d,e)}if("function"!==typeof d)throw Error("Expected the reducer to be a function.");var p=d,w=e,f=[],J=f,X=!1;a({type:ya.INIT});return b={dispatch:a,subscribe:c,getState:function(){return w},
replaceReducer:function(b){if("function"!==typeof b)throw Error("Expected the nextReducer to be a function.");p=b;a({type:ya.INIT})}},b[za]=function(){var b;return b={subscribe:function(b){function a(){b.next&&b.next(w)}if("object"!==typeof b)throw new TypeError("Expected the observer to be an object.");a();return{unsubscribe:c(a)}}},b[za]=function(){return this},b},b}function t(d){"undefined"!==typeof console&&"function"===typeof console.error&&console.error(d);try{throw Error(d);}catch(va){}}function k(){}
function z(){for(var d=arguments.length,e=Array(d),g=0;g<d;g++)e[g]=arguments[g];return function(c){for(var a=0;a<e.length;a++)for(var b=e[a],p=0;p<b.map.length;p++){var d=b.map[p];Object.defineProperty(c.prototype,d,{get:b.getter(d),set:b.setter(d),configurable:b.configurable,enumerable:b.enumerable})}}}function v(){for(var d=arguments.length,e=Array(d),g=0;g<d;g++)e[g]=arguments[g];return{map:e,getter:function(c){return function(){return this.native[c]}},setter:function(c){return function(a){this.native[c].copy(a)}},
configurable:!0,enumerable:!0}}var M=function va(d){for(var c=arguments.length,a=Array(1<c?c-1:0),b=1;b<c;b++)a[b-1]=arguments[b];var c=!0,b=!1,p=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var w=a[Symbol.iterator](),f;!(c=(f=w.next()).done);c=!0){var e=f.value;if(e){var a=!0,g=!1,h=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var m=Object.getOwnPropertyNames(e)[Symbol.iterator](),k;!(a=(k=m.next()).done);a=!0){var l=k.value;void 0!==d[l]&&"[object Object]"===
d[l].toString()&&"[object Object]"===e[l].toString()?e[l].uuid?d[l]=e[l]:va(d[l],e[l]):d[l]="undefined"===typeof d[l]?e[l]:d[l];"undefined"===typeof d[l]&&Array.isArray(e[l])?d[l]=e[l].slice():"undefined"===typeof d[l]&&Array.isArray(e[l])&&(d[l]=e[l])}}catch(W){g=!0,h=W}finally{try{!a&&m.return&&m.return()}finally{if(g)throw h;}}}}}catch(W){b=!0,p=W}finally{try{!c&&w.return&&w.return()}finally{if(b)throw p;}}return d},E=function(d,e){for(var c={},a=0,b=e.length;a<b;a++)c[e[a]]=d[a];return c},F=function Qb(c,
a){for(var b in a)Array.isArray(c[b])?c[b]=E(c[b],a[b]):c[b]instanceof Object&&!Array.isArray(a[b])&&(c[b]=Qb(c[b],a[b]));return c},ua=function(d){var c={},a=[];d=d||this;d.on=function(b,a,d){(c[b]=c[b]||[]).push([a,d])};d.off=function(b,p){b||(c={});b=c[b]||a;for(var d=b.length=p?b.length:0;d--;)p==b[d][0]&&b.splice(d,1)};d.emit=function(b){for(var p=c[b]||a,p=0<p.length?p.slice(0,p.length):p,d=0,f;f=p[d++];)f[0].apply(f[1],a.slice.call(arguments,1))}},g=function(d,c){if(!(d instanceof c))throw new TypeError("Cannot call a class as a function");
},h=function(){function d(c,a){for(var b=0;b<a.length;b++){var p=a[b];p.enumerable=p.enumerable||!1;p.configurable=!0;"value"in p&&(p.writable=!0);Object.defineProperty(c,p.key,p)}}return function(c,a,b){a&&d(c.prototype,a);b&&d(c,b);return c}}(),Pb=function(d,c,a){c in d?Object.defineProperty(d,c,{value:a,enumerable:!0,configurable:!0,writable:!0}):d[c]=a;return d},l=Object.assign||function(d){for(var c=1;c<arguments.length;c++){var a=arguments[c],b;for(b in a)Object.prototype.hasOwnProperty.call(a,
b)&&(d[b]=a[b])}return d},u=function c(a,b,p){null===a&&(a=Function.prototype);var d=Object.getOwnPropertyDescriptor(a,b);if(void 0===d){if(a=Object.getPrototypeOf(a),null!==a)return c(a,b,p)}else{if("value"in d)return d.value;b=d.get;return void 0===b?void 0:b.call(p)}},n=function(c,a){if("function"!==typeof a&&null!==a)throw new TypeError("Super expression must either be null or a function, not "+typeof a);c.prototype=Object.create(a&&a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,
configurable:!0}});a&&(Object.setPrototypeOf?Object.setPrototypeOf(c,a):c.__proto__=a)},r=function(c,a){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!a||"object"!==typeof a&&"function"!==typeof a?c:a},Aa=function(){return function(c,a){if(Array.isArray(c))return c;$jscomp.initSymbol();$jscomp.initSymbolIterator();if(Symbol.iterator in Object(c)){var b=[],p=!0,d=!1,f=void 0;try{$jscomp.initSymbol();$jscomp.initSymbolIterator();for(var e=c[Symbol.iterator](),
g;!(p=(g=e.next()).done)&&(b.push(g.value),!a||b.length!==a);p=!0);}catch(Rb){d=!0,f=Rb}finally{try{if(!p&&e["return"])e["return"]()}finally{if(d)throw f;}}return b}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),G=function(c){function a(b,p,c){g(this,a);b=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"@"+b+": "+p));p=b.stack.split("\n");p.splice(1,2);b.stack=p.join("\n");process||console.error("Component:",c);b.name="CompositionError";return b}n(a,c);return a}(Error),
Yb=function(c){function a(b,p,c){var f=3<arguments.length&&void 0!==arguments[3]?arguments[3]:!1;g(this,a);var d=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"@"+b+": "+p)),e=d.stack.split("\n");e.splice(1,2);d.stack=e.join("\n");process||console.error("Active module:",c);!process&&f&&console.error("Dependency published by module:",f);d.name="DependencyError";return d}n(a,c);return a}(Error),Ba=function(c){function a(b,p,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:
!1;g(this,a);var e=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,"@"+b+": "+p)),w=e.stack.split("\n");w.splice(1,2);e.stack=w.join("\n");process||console.error("Component:",dependencyModule);!process&&d&&console.error("Active module:",d);e.name="ManagerError";return e}n(a,c);return a}(Error),Ca=function(){throw Error("WhitestormJS Framework requires Three.js r84. https://threejs.org/");};try{d.REVISION||Ca()}catch(c){Ca()}var Da=function(c){function a(){g(this,a);return r(this,(a.__proto__||
Object.getPrototypeOf(a)).apply(this,arguments))}n(a,c);h(a,[{key:"integrateModules",value:function(b){b&&(this.modules=b.modules.slice(0));for(var a=0,c=this.modules.length;a<c;a++)this.applyModule(this.modules[a],!1);b&&this.applyBridge({onCopy:b})}},{key:"applyBridge",value:function(){for(var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=this.modules,c=0,d=a.length;c<d;c++)for(var e in b)if(b[e]){var g=a[c];g&&g.bridge&&g.bridge[e]&&(b[e]=g.bridge[e].apply(this,[b[e],g]))}return b}},
{key:"applyModule",value:function(b){if(b){(1<arguments.length&&void 0!==arguments[1]?arguments[1]:1)&&this.modules.push(b);this.manager&&this.manager.active(b);if(b.manager&&this.manager)b.manager(this.manager);else if(b.manager)throw new Ba("Component","Module requires ModuleManager that is turned off for this component",this,b);b.integrate&&b.integrate.bind(this)(b);return b}}},{key:"disposeModules",value:function(){for(;this.modules.length;)this.disposeModule(this.modules[0])}},{key:"disposeModule",
value:function(b){if(b)return this.modules.splice(this.modules.indexOf(b),1),b.dispose&&b.dispose.bind(this)(b),b}},{key:"module",value:function(b){this.applyModule(b);return this}}]);return a}(ua),Zb="object"==typeof self&&self&&self.Object===Object&&self,L=("object"==typeof global&&global&&global.Object===Object&&global||Zb||Function("return this")()).Symbol,Ea=Object.prototype,Sb=Ea.hasOwnProperty,Tb=Ea.toString,K=L?L.toStringTag:void 0,Ub=Object.prototype.toString,wa=L?L.toStringTag:void 0,Vb=
function(c,a){return function(b){return c(a(b))}}(Object.getPrototypeOf,Object),xa=Function.prototype.toString,Wb=Object.prototype.hasOwnProperty,Xb=xa.call(Object),za=function(c){var a=c.Symbol;"function"===typeof a?a.observable?c=a.observable:(c=a("observable"),a.observable=c):c="@@observable";return c}("undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof module?module:Function("return this")()),ya={INIT:"@@redux/INIT"};"production"!==
process.env.NODE_ENV&&"string"===typeof k.name&&"isCrushed"!==k.name&&t("You are currently using minified code outside of NODE_ENV === 'production'. This means that you are running a slower development build of Redux. You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) to ensure you have the correct code for your production build.");var O=function(){function c(a){g(this,c);this.handler=a;this.currentModule=
null;this.store=q(function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[{},""],a=arguments[1];b[0][a.key]=a.data;b[1]=a.key;return b});this.modules={}}h(c,[{key:"active",value:function(a){this.currentModule=a}},{key:"reset",value:function(){this.currentModule=null}},{key:"define",value:function(a){this.modules[a]=this.currentModule}},{key:"use",value:function(a){return this.modules[a]}},{key:"set",value:function(a,b){this.store.dispatch({type:"ADD",key:a,data:b})}},{key:"get",value:function(a){if(!this.store.getState()[0][a])throw new Yb("ModuleManager",
"Module requires '"+a+"' dependency",this.currentModule);return this.store.getState()[0][a]}},{key:"has",value:function(a){return!!this.store.getState()[0][a]}},{key:"update",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.store.subscribe(function(){var c=a.store.getState(),d=Aa(c,2),c=d[0],d=d[1],f=b[d];f&&f(c[d])})}},{key:"add",value:function(){console.warn(".add() method is deprecated. Use .set() instead");return this.set.apply(this,arguments)}},{key:"require",
value:function(a,b){void 0===this.use(a)&&this.handler.applyModule(b())}}]);return c}(),P,Fa,C=(Fa=P=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.defaults,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.instructions;g(this,a);var f=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));f._wait=[];f.modules=[];f.children=[];f.params=M(F(b,d),c);f.params.manager&&(f.manager=new O);f.modules=
f.params.modules;f.integrateModules();return f}n(a,c);h(a,[{key:"wait",value:function(b){b&&this._wait.push(b);return Promise.all(this._wait)}},{key:"defer",value:function(b){var a=this;this.isDeffered?this.wait().then(function(){return b(a)}):b(this)}},{key:"updateParams",value:function(){return this.params=M(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},this.params)}},{key:"clone",value:function(){return(new this.constructor(this.params)).copy(this)}},{key:"copy",value:function(b,a){this.params=
l({},b.params);b.native&&(this.native=b.native.clone(b.params));a&&a();this.integrateModules(b);return this}},{key:"add",value:function(b){var a=this;b.parent=this;return new Promise(function(c,p){a.defer(function(){var d=b.native;d||p();var f=a.applyBridge({onAdd:b}).onAdd,e=function(){a.native.add(d);a.children.push(b);c(b)};f instanceof Promise?f.then(e):e()})})}},{key:"remove",value:function(b){b.parent=null;this.native.remove(b.native)}},{key:"addTo",value:function(b){return b.add(this)}},{key:"isDeffered",
get:function(){return 0<this._wait.length}},{key:"manager",get:function(){if(this._manager)return this._manager;throw new Ba("Component","ModuleManager is not used in this component. 'manager' parameter should be set as 'true'",this);},set:function(b){this._manager=b}},{key:"native",get:function(){return this._native},set:function(b){this._native=b;this._native.component=this;return this._native}}]);return a}(Da),P.defaults={modules:[],manager:!0},P.instructions={},Fa),Ga,Ha,Q,Ia,m=(Ga=z(v("position",
"rotation","quaternion","scale"),function(){for(var c=arguments.length,a=Array(c),b=0;b<c;b++)a[b]=arguments[b];return{map:a,getter:function(b){return function(){return this.native[b]}},setter:function(b){return function(a){this.native[b]=a}},configurable:!0,enumerable:!0}}("material","geometry")),Ga(Ha=(Ia=Q=function(c){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.defaults,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.instructions;g(this,a);var f=r(this,
(a.__proto__||Object.getPrototypeOf(a)).call(this,b,c,d));if(f.params.build){c=f.build(f.params);if(!c)throw new G("MeshComponent",".build() method should return a THREE.Object3D or a Promise resolved with THREE.Object3D.",f);c instanceof Promise?c.then(function(b){f.native=b;f.wrap()}):(f.native=c,f.wrap())}return f}n(a,c);h(a,null,[{key:"custom",value:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d.Mesh;return function(a){function d(){g(this,d);return r(this,(d.__proto__||
Object.getPrototypeOf(d)).apply(this,arguments))}n(d,a);h(d,[{key:"build",value:function(){var a=this.applyBridge({geometry:b,material:(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params).material});return this.applyBridge({mesh:new c(a.geometry,a.material)}).mesh}}]);return d}(a)}},{key:"create",value:function(b,c,d){return new (a.custom(b,d))(c)}}]);h(a,[{key:"build",value:function(){throw new G("MeshComponent","Instance should have it's own .build().",this);}},{key:"wrap",value:function(){var b=
this;return new Promise(function(a){var c=b.params,d=c.position,p=c.rotation,e=c.scale,c=c.shadow;b.position.set(d.x,d.y,d.z);b.rotation.set(p.x,p.y,p.z);b.scale.set(e.x,e.y,e.z);b.native.castShadow=c.cast;b.native.receiveShadow=c.receive;b.applyBridge({onWrap:1});a(b)})}},{key:"copy",value:function(b){var c=this;return u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"copy",this).call(this,b,function(){c.position.copy(b.position);c.rotation.copy(b.rotation);c.quaternion.copy(b.quaternion)})}},
{key:"clone",value:function(b,a){var c=(new this.constructor({build:!1})).copy(this);b&&(c.geometry=c.geometry.clone());a&&(c.material=c.material.clone());return c}}]);return a}(C),Q.defaults=l({},C.defaults,{build:!0,geometry:{},material:!1,shadow:{cast:!0,receive:!0},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}}),Q.instructions={position:["x","y","z"],rotation:["x","y","z"],scale:["x","y","z"]},Ia))||Ha),Ja,Ka,R,La,y=(Ja=z(v("position","rotation","quaternion","target")),Ja(Ka=
(La=R=function(c){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.defaults,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.instructions;g(this,a);var f=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,c,d));if(f.params.build){c=f.build(f.params);if(!c)throw new G("LightComponent",".build() method should return a THREE.Object3D or a Promise resolved with THREE.Object3D.",f);c instanceof Promise?c.then(function(b){f.native=b}):f.native=c;f.wrap()}return f}
n(a,c);h(a,[{key:"build",value:function(){throw new G("MeshComponent","Instance should have it's own .build().",this);}},{key:"wrap",value:function(){var b=this;return new Promise(function(a){b.defer(function(){var c=b.params,d=c.position,c=c.rotation;b.position.set(d.x,d.y,d.z);b.rotation.set(c.x,c.y,c.z);b.applyBridge({onWrap:1});a(b)})})}},{key:"wrapShadow",value:function(){var b=this.native,a=this.params.shadow;b.castShadow=a.cast;b.shadow.mapSize.width=a.mapSize.width;b.shadow.mapSize.height=
a.mapSize.height;b.shadow.bias=a.bias;b.shadow.radius=a.radius;b=b.shadow.camera;a=a.camera;b.near=a.near;b.far=a.far;b.fov=a.fov;b.left=a.left;b.right=a.right;b.top=a.top;b.bottom=a.bottom}},{key:"copy",value:function(b){var c=this;return u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"copy",this).call(this,b,function(){c.target&&c.target.copy(b.target());c.position.copy(b.position);c.rotation.copy(b.rotation);c.quaternion.copy(b.quaternion)})}},{key:"clone",value:function(){return(new this.constructor({build:!1})).copy(this)}}]);
return a}(C),R.defaults=l({},C.defaults,{build:!0,shadow:{cast:!0,bias:0,radius:1,mapSize:{width:1024,height:1024},camera:{near:!0,far:400,fov:90,top:200,bottom:-200,left:-200,right:200}},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}),R.instructions={position:["x","y","z"],rotation:["x","y","z"]},La))||Ka),Ma,Na,S,Oa,D=(Ma=z(v("position","rotation","quaternion","target")),Ma(Na=(Oa=S=function(c){function a(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:a.defaults,d=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:a.instructions;g(this,a);var f=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,c,d));if(f.params.build){c=f.build(f.params);if(!c)throw new G("CameraComponent",".build() method should return a THREE.Object3D or a Promise resolved with THREE.Object3D.",f);c instanceof Promise?c.then(function(b){f.native=b}):f.native=c;f.wrap()}return f}n(a,c);h(a,[{key:"build",value:function(){throw new G("CameraComponent","Instance should have it's own .build().",this);
}},{key:"wrap",value:function(){var b=this;return new Promise(function(a){b.defer(function(){b.position.set(b.params.position.x,b.params.position.y,b.params.position.z);b.rotation.set(b.params.rotation.x,b.params.rotation.y,b.params.rotation.z);b.applyBridge({onWrap:1});a(b)})})}},{key:"copy",value:function(b){var c=this;return u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"copy",this).call(this,b,function(){c.target&&c.target.copy(b.target());c.position.copy(b.position);c.rotation.copy(b.rotation);
c.quaternion.copy(b.quaternion)})}},{key:"clone",value:function(){return(new this.constructor({build:!1})).copy(this)}}]);return a}(C),S.defaults=l({},C.defaults,{build:!0,position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}}),S.instructions={position:["x","y","z"],rotation:["x","y","z"],scale:["x","y","z"]},Oa))||Na),A="undefined"===typeof window?global:window;global.performance={now:function(){var c=process.hrtime();return 1E3*c[0]+c[1]/1E6}};var $b=function(c){function a(){var b=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:[];g(this,a);console.log("WHS.App 2.0.0");var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));c.simulate=!1;c.updateEnabled=!0;c.loops=[];c.manager=new O(c);c.modules=b;c.integrateModules();return c}n(a,c);h(a,[{key:"start",value:function(){function b(){a(b);if(d)for(var f=0,p=c.length;f<p;f++){var e=c[f];e.enabled&&e.execute(e.clock)}}var a=function(){return A.requestAnimationFrame||A.webkitRequestAnimationFrame||A.mozRequestAnimationFrame||function(b){A.setTimeout(b,
1E3/60)}}(),c=this.loops,d=this.updateEnabled;this.updateEnabled=!0;b()}},{key:"stop",value:function(){this.updateEnabled=!1}},{key:"addLoop",value:function(b){var a=this;return new Promise(function(c){a.loops.push(b);c(b)})}},{key:"removeLoop",value:function(b){var a=this;return new Promise(function(c){var d=a.loops.indexOf(b);-1!==d&&a.loops.splice(d,1);c(b)})}},{key:"get",value:function(b){return this.manager.get(b)}},{key:"use",value:function(b){return this.manager.use(b)}}]);return a}(Da),H=
function(){function c(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!0;g(this,c);this.func=a;this.clock=b?new d.Clock:null;this.enabled=!1}h(c,[{key:"start",value:function(a){this.enabled||(a&&a.addLoop(this),this.clock&&this.clock.start(),this.enabled=!0)}},{key:"stop",value:function(a){this.enabled&&(this.clock&&this.clock.stop(),this.enabled=!1,a&&a.removeLoop(this))}},{key:"execute",value:function(){return this.func(this.clock)}}]);return c}(),Pa,Qa,ac=(Qa=Pa=function(c){function a(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({light:new d.AmbientLight(b.color,b.intensity)}).light}}]);return a}(y),Pa.defaults=l({},y.defaults,{color:16777215,intensity:1}),Qa),Ra,Sa,bc=(Sa=Ra=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};g(this,a);b=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults));b.wrapShadow();return b}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({light:new d.DirectionalLight(b.color,b.intensity)}).light}}]);return a}(y),Ra.defaults=l({},y.defaults,{color:16777215,intensity:1}),Sa),Ta,Ua,cc=(Ua=Ta=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,
(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({light:new d.HemisphereLight(b.skyColor,b.groundColor,b.intensity)}).light}}]);return a}(y),Ta.defaults=l({},y.defaults,{skyColor:16777215,groundColor:16777215,intensity:1}),Ua),Va,Wa,dc=(Wa=Va=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);b=r(this,(a.__proto__||
Object.getPrototypeOf(a)).call(this,b,a.defaults));b.wrapShadow();return b}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({light:new d.PointLight(b.color,b.intensity,b.distance,b.decay)}).light}}]);return a}(y),Va.defaults=l({},y.defaults,{color:16777215,intensity:1,distance:100,decay:1}),Wa),Xa,Ya,ec=(Ya=Xa=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);b=r(this,
(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults));b.wrapShadow();return b}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({light:new d.SpotLight(b.color,b.intensity,b.distance,b.angle,b.exponent,b.decay)}).light}}]);return a}(y),Xa.defaults=l({},y.defaults,{color:16777215,intensity:1,distance:100,angle:Math.PI/3,exponent:0,decay:1}),Ya),Za,$a,fc=($a=Za=function(c){function a(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({light:new d.RectAreaLight(b.color,b.intensity,b.width,b.height)}).light}}]);return a}(y),Za.defaults=l({},y.defaults,{color:16777215,intensity:1,width:10,height:10}),$a),ab,bb,gc=(bb=ab=function(c){function a(){var b=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({camera:new d.CubeCamera(b.near,b.far,b.cubeResolution)}).camera}}]);return a}(D),ab.defaults=l({},D.defaults,{near:1,far:1E3,cubeResolution:128}),bb),cb,db,hc=(db=cb=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:
{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({camera:new d.OrthographicCamera(b.left,b.right,b.top,b.bottom,b.near,b.far)}).camera}}]);return a}(D),cb.defaults=l({},D.defaults,{near:1,far:1E3,left:A.innerWidth/-2,right:A.innerWidth/2,top:A.innerHeight/2,bottom:A.innerHeight/-2}),db),eb,fb,gb=(fb=eb=function(c){function a(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return this.applyBridge({camera:new d.PerspectiveCamera(b.fov,b.aspect,b.near,b.far)}).camera}}]);return a}(D),eb.defaults=l({},D.defaults,{near:1,far:1E3,fov:75,aspect:A.innerWidth/A.innerHeight}),fb),T,hb,ic=(hb=T=function(c){function a(){var b=0<
arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};return new (b.buffer?d.BoxBufferGeometry:d.BoxGeometry)(b.geometry.width,b.geometry.height,b.geometry.depth,b.geometry.widthSegments,b.geometry.heightSegments,b.geometry.depthSegments)}}]);return a}(m),T.defaults=l({},m.defaults,{geometry:{width:1,height:1,depth:1,widthSegments:1,heightSegments:1,depthSegments:1}}),T.instructions=l({},m.instructions,{geometry:"width height depth widthSegments heightSegments depthSegements".split(" ")}),hb),U,ib,jc=(ib=U=function(c){function a(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};return new (b.buffer?d.CircleBufferGeometry:d.CircleGeometry)(b.geometry.radius,b.geometry.segments,b.geometry.thetaStart,b.geometry.thetaLength)}}]);return a}(m),U.defaults=l({},m.defaults,{geometry:{radius:50,segments:8,thetaStart:0,thetaLength:2*Math.PI}}),U.instructions=l({},m.instructions,{geometry:["radius","segments","thetaStart","thetaLength"]}),ib),Y,jb,kc=(jb=Y=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,
(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.ConeBufferGeometry:d.ConeGeometry)(b.geometry.radius,b.geometry.height,b.geometry.radiusSegments,b.geometry.heightSegments,b.geometry.openEnded,b.geometry.thetaStart,b.geometry.thetaLength)}}]);return a}(m),Y.defaults=l({},m.defaults,{geometry:{radius:20,height:100,radiusSegments:32,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:2*Math.PI}}),Y.instructions=l({},m.instructions,{geometry:"radius height radiusSegments heightSegments openEnded thetaStart thetaLength".split(" ")}),
jb),Z,kb,lc=(kb=Z=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});
return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.CylinderBufferGeometry:d.CylinderGeometry)(b.geometry.radiusTop,b.geometry.radiusBottom,b.geometry.height,b.geometry.radiusSegments,b.geometry.heightSegments,b.geometry.openEnded,b.geometry.thetaStart,b.geometry.thetaLength)}}]);return a}(m),Z.defaults=l({},m.defaults,{geometry:{radiusTop:0,radiusBottom:1,
height:1,radiusSegments:32,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:2*Math.PI}}),Z.instructions=l({},m.instructions,{geometry:"radiusTop radiusBottom height radiusSegments heightSegments openEnded thetaStart thetaLength".split(" ")}),kb),aa,lb,mc=(lb=aa=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||
Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.DodecahedronBufferGeometry:d.DodecahedronGeometry)(b.geometry.radius,
b.geometry.detail)}}]);return a}(m),aa.defaults=l({},m.defaults,{geometry:{radius:1,detail:0}}),aa.instructions=l({},m.instructions,{geometry:["radius","detail"]}),lb),ba,mb,nc=(mb=ba=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",
value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=new d.ExtrudeGeometry(b.geometry.shapes,b.geometry.options);return b.buffer?(new d.BufferGeometry).fromGeometry(a):a}}]);return a}(m),ba.defaults=l({},m.defaults,
{geometry:{shapes:[],options:{}}}),ba.instructions=l({},m.instructions,{geometry:["shapes","options"]}),mb),ca,nb,oc=(nb=ca=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.IcosahedronBufferGeometry:d.IcosahedronGeometry)(b.geometry.radius,b.geometry.detail)}}]);return a}(m),ca.defaults=l({},m.defaults,{geometry:{radius:1,detail:0}}),ca.instructions=l({},m.instructions,
{geometry:["radius","detail"]}),nb),da,ob,pc=(ob=da=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),
material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.LatheBufferGeometry:d.LatheGeometry)(b.geometry.points)}}]);return a}(m),da.defaults=l({},m.defaults,{geometry:{points:[]}}),da.instructions=l({},m.instructions,{geometry:["points"]}),ob),ea,pb,qc=(pb=ea=function(c){function a(b){g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,
b,a.defaults,a.instructions))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Line(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},a=b.buffer?new d.BufferGeometry:new d.Geometry;if(b.buffer){for(var b=b.geometry.curve.getPoints(b.geometry.points),
c=new Float32Array(3*b.length),f=0,e=b.length;f<e;f++){var g=3*f;c[g]=b[f].x;c[g+1]=b[f].y;c[g+2]=b[f].z}a.addAttribute("position",new d.BufferAttribute(c,3))}else a.vertices=b.geometry.curve.getPoints(b.geometry.points);return a}}]);return a}(m),ea.defaults=l({},m.defaults,{geometry:{curve:new d.LineCurve3(new d.Vector3(0,0,0),new d.Vector3(10,0,0)),points:50}}),ea.instructions=l({},m.instructions,{geometry:["curve","points"]}),pb),fa,qb,rb=(qb=fa=function(c){function a(){var b=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions,!1))}n(a,c);h(a,null,[{key:"filter",value:function(b,a){return function f(b){b.children.forEach(function(c,d){c.children&&f(c);a(c)||b.children.splice(d,1)});return b}(b)}}]);h(a,[{key:"build",value:function(){var b=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=new Promise(function(a){c.texturePath&&c.laoder.setTexturePath(c.texturePath);
c.loader.load(c.url,function(){c.onLoad.apply(c,arguments);var d=b.applyBridge({mesh:c.parser.apply(c,arguments)}).mesh,f=b.applyBridge({geometry:d.geometry,material:c.useCustomMaterial?c.material:d.material}),e=f.geometry,f=f.material;d.geometry&&(d.geometry=e);d.material&&(d.material=f);a(d)},c.onProgress,c.onError)});u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wait",this).call(this,d);return d}}]);return a}(m),fa.defaults=l({},m.defaults,{url:"",loader:new d.JSONLoader,onLoad:function(){},
onProgress:function(){},onError:function(){},texturePath:null,useCustomMaterial:!1,parser:function(c,a){return new d.Mesh(c,a)}}),fa.instructions=l({},m.instructions),qb),sb,tb,rc=(tb=sb=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",
value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.OctahedronBufferGeometry:d.OctahedronGeometry)(b.geometry.radius,b.geometry.detail)}}]);return a}(m),sb.defaults=l({},m.defaults,{geometry:{radius:1,
detail:0}}),tb),ub,vb,sc=(vb=ub=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",
value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.ParametricBufferGeometry:d.ParametricGeometry)(b.geometry.func,b.geometry.slices,b.geometry.stacks)}}]);return a}(m),ub.defaults=l({},m.defaults,{geometry:{func:function(c,a){return new d.Vector3(c,a,0)},slices:10,stacks:10}}),vb),ga,wb,tc=(wb=ga=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,
b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};
return new (b.buffer?d.PlaneBufferGeometry:d.PlaneGeometry)(b.geometry.width,b.geometry.height,b.geometry.wSegments,b.geometry.hSegments)}}]);return a}(m),ga.defaults=l({},m.defaults,{geometry:{width:10,height:10,wSegments:1,hSegments:1}}),ga.instructions=l({},m.instructions,{geometry:["width","height","wSegments","hSegments"]}),wb),I,xb,yb=[-1,-1,-1,1,-1,-1,1,1,-1,-1,1,-1,-1,-1,1,1,-1,1,1,1,1,-1,1,1],zb=[2,1,0,0,3,2,0,4,7,7,3,0,0,1,5,5,4,0,1,2,6,6,5,1,2,3,7,7,6,2,4,5,6,6,7,4],uc=(xb=I=function(c){function a(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,
b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.PolyhedronBufferGeometry:d.PolyhedronGeometry)(b.geometry.verticesOfCube,b.geometry.indicesOfFaces,b.geometry.radius,b.geometry.detail)}}]);return a}(m),I.verticesOfCube=yb,I.indicesOfFaces=zb,I.defaults=l({},m.defaults,{geometry:{verticesOfCube:yb,indicesOfFaces:zb,radius:6,detail:2}}),I.instructions=l({},m.instructions,{geometry:["verticesOfCube","indicesOfFaces",
"radius","detail"]}),xb),ha,Ab,vc=(Ab=ha=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),
material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.RingBufferGeometry:d.RingGeometry)(b.geometry.innerRadius,b.geometry.outerRadius,b.geometry.thetaSegments,b.geometry.phiSegments,b.geometry.thetaStart,b.geometry.thetaLength)}}]);return a}(m),ha.defaults=l({},m.defaults,{geometry:{innerRadius:0,outerRadius:50,thetaSegments:8,phiSegments:8,
thetaStart:0,thetaLength:2*Math.PI}}),ha.instructions=l({},m.defaults,{geometry:"innerRadius outerRadius thetaSegments phiSegments thetaStart thetaLength".split(" ")}),Ab),ia,Bb,wc=(Bb=ia=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",
value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.ShapeBufferGeometry:d.ShapeGeometry)(b.geometry.shapes)}}]);return a}(m),ia.defaults=l({},m.defaults,{geometry:{shapes:[]}}),ia.instructions=
l({},m.instructions,{geometry:["shapes"]}),Bb),ja,Cb,xc=(Cb=ja=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);return r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions))}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},
{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.SphereBufferGeometry:d.SphereGeometry)(b.geometry.radius,b.geometry.widthSegments,b.geometry.heightSegments)}}]);return a}(m),ja.defaults=l({},m.defaults,{geometry:{radius:1,widthSegments:8,heightSegments:6}}),ja.instructions=l({},m.instructions,{geometry:["radius","widthSegments","heightSegments"]}),Cb),ka,Db,yc=(Db=ka=function(c){function a(){var b=0<arguments.length&&void 0!==
arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},
{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.TetrahedronBufferGeometry:d.TetrahedronGeometry)(b.geometry.radius,b.geometry.detail)}}]);return a}(m),ka.defaults=l({},m.defaults,{geometry:{radius:1,detail:0}}),ka.instructions=l({},m.instructions,{geometry:["radius","detail"]}),Db),la,Eb,zc=(Eb=la=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||
Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=new Promise(function(a){d.FontLoader.load(c.geometry.parameters.font,function(f){c.geometry.parameters.font=f;f=b.applyBridge({geometry:new d.TextGeometry(c.geometry.text,c.geometry.parameters),material:c.material});
a(b.applyBridge({mesh:new d.Mesh(f.geometry,f.material)}).mesh)})});u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wait",this).call(this,e);return e}}]);return a}(m),la.defaults=l({},m.defaults,{geometry:{text:"Hello World!",loader:new d.FontLoader,parameters:{size:12,height:50,curveSegments:12,font:new d.Font,bevelEnabled:!1,bevelThickness:10,bevelSize:8}}}),la.instructions=l({},m.instructions,{geometry:["text","loader","parameters"]}),Eb),ma,Fb,Ac=(Fb=ma=function(c){function a(){var b=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,
b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new d.TorusGeometry(b.geometry.radius,b.geometry.tube,b.geometry.radialSegments,b.geometry.tubularSegments,b.geometry.arc)}}]);return a}(m),ma.defaults=l({},m.defaults,{geometry:{radius:100,tube:40,radialSegments:8,tubularSegments:6,arc:2*Math.PI}}),ma.instructions=l({},m.instructions,{geometry:["radius","tube","radialSegments","tubularSegments","arc"]}),Fb),na,Gb,Bc=(Gb=
na=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});return this.applyBridge({mesh:new d.Mesh(b.geometry,
b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.TorusKnotBufferGeometry:d.TorusKnotGeometry)(b.geometry.radius,b.geometry.tube,b.geometry.radialSegments,b.geometry.tubularSegments,b.geometry.p,b.geometry.q)}}]);return a}(m),na.defaults=l({},m.defaults,{geometry:{radius:100,tube:40,radialSegments:64,tubularSegments:8,p:2,q:3}}),na.instructions=l({},m.instructions,{geometry:"radius tube radialSegments tubularSegments p q".split(" ")}),
Gb),oa,Hb,Cc=(Hb=oa=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,b,a.defaults,a.instructions));b.build&&(c.build(b),u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"wrap",c).call(c));return c}n(a,c);h(a,[{key:"build",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.params,b=this.applyBridge({geometry:this.buildGeometry(b),material:b.material});
return this.applyBridge({mesh:new d.Mesh(b.geometry,b.material)}).mesh}},{key:"buildGeometry",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return new (b.buffer?d.TubeBufferGeometry:d.TubeGeometry)(b.geometry.path,b.geometry.segments,b.geometry.radius,b.geometry.radiusSegments,b.geometry.closed)}}]);return a}(m),oa.defaults=l({},m.defaults,{geometry:{path:new d.LineCurve3(new d.Vector3(0,0,0),new d.Vector3(0,0,1)),segments:20,radius:2,radiusSegments:8,closed:!1}}),
oa.instructions=l({},m.instructions,{geometry:["path","segments","radius","radiusSegments","closed"]}),Hb),Dc=function(c){function a(){g(this,a);for(var b=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,{})),c=arguments.length,e=Array(c),f=0;f<c;f++)e[f]=arguments[f];for(c=0;c<e.length;c++)f=e[c],f instanceof C?f.addTo(b):f instanceof d.Object3D&&b.native.add(f);return b}n(a,c);h(a,[{key:"build",value:function(){return new d.Object3D}}]);return a}(m),Ec=function(){function c(){var a=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:document.body;g(this,c);a.container?(console.warn("ElementModule now accepts only argument which is a DOM object, not a params object."),this.container=a.container):this.container=a;this.createElement()}h(c,[{key:"createElement",value:function(){this.element=window.document.createElement("div");this.element.className="whs-app";this.element.style.width="inherit";this.element.style.height="inherit";this.element.style.position="relative"}},{key:"manager",value:function(a){a.set("element",
this.element);a.set("container",this.container)}},{key:"integrate",value:function(a){a.container.appendChild(a.element)}}]);return c}(),Ib,Jb,Kb,Fc=(Jb=Ib=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{shadow:!1}).shadow;g(this,c);Kb.call(this);var a=this.params=Object.assign({width:window.innerWidth,height:window.innerHeight,resolution:new d.Vector2(1,1),pixelRatio:window.devicePixelRatio,bgColor:0,
bgOpacity:1,renderer:{}},a),e=a.bgColor,w=a.bgOpacity,f=a.pixelRatio,l=a.width,h=a.height,m=a.resolution;this.renderer=new d.WebGLRenderer(a.renderer);this.effects=[];this.applyAdditional("shadow",b);this.renderer.setClearColor(e,w);f&&this.renderer.setPixelRatio(f);this.setSize(Number(l*m.x).toFixed(),Number(h*m.y).toFixed())}h(c,[{key:"applyAdditional",value:function(a){1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&c.additional[a].apply(this,[this.renderer])}},{key:"integrateRenderer",
value:function(a,b,c){var d=this;this.scene=b;this.camera=c;this.renderLoop=new H(function(){return d.renderer.render(d.scene,d.camera)});this.attachToCanvas(a);return this.renderLoop}},{key:"effect",value:function(a,b){var c=this;this.defer.then(function(){c.renderLoop.stop();var d=c.renderer.getSize();a.setSize(d.width,d.height);d=new H(b?b:function(){a.render(c.scene,c.camera)});c.effects.push(d);c.enabled&&d.start(c.app)})}},{key:"setSize",value:function(a,b){this.renderer&&this.renderer.setSize(a,
b)}},{key:"attachToCanvas",value:function(a){var b=this.renderer.domElement;a.appendChild(b);b.style.width="100%";b.style.height="100%"}},{key:"stop",value:function(){this.enabled=!1;this.renderLoop.stop();this.effects.forEach(function(a){return a.stop()})}},{key:"play",value:function(){this.renderLoop.start();this.effects.forEach(function(a){return a.start()})}},{key:"manager",value:function(a){var b=this;a.define("rendering");a.set("renderer",this.renderer);this.app=a.handler;this.renderLoop=this.integrateRenderer(a.get("element"),
a.get("scene"),a.get("camera").native);a.update({element:function(a){b.attachToCanvas(a)},scene:function(a){b.scene=a},camera:function(a){b.camera=a.native}});this.resolve()}},{key:"integrate",value:function(a){var b=this;a.renderLoop.start(this);a.effects.forEach(function(a){return a.start(b)})}},{key:"dispose",value:function(a){var b=this;a.renderLoop.stop(this);a.effects.forEach(function(a){return a.stop(b)});a.renderer.forceContextLoss()}}]);return c}(),Ib.additional={shadow:function(c){c.shadowMap.enabled=
!0}},Kb=function(){var c=this;this.enabled=!0;this.defer=new Promise(function(a){c.resolve=a})},Jb),Gc=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;g(this,c);this.scene=a?null:new d.Scene}h(c,[{key:"manager",value:function(a){a.set("scene",this.scene)}},{key:"integrate",value:function(a){this.children=[];this.add=function(b){var c=this;b.parent=this;return new Promise(function(d,f){b.defer(function(){var e=b.native;e||f();var p=c.applyBridge({onAdd:b}).onAdd,
w=function(){a.scene.add(e);c.children.push(b);d(b)};p instanceof Promise?p.then(w):w()})})};this.remove=function(b){b.parent=null;a.scene.remove(b.native)};this.setScene=function(b){a.scene=b;this.manager.set("scene",b)}}}]);return c}(),Hc=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,c);this.params=Object.assign({auto:!0},a);this.callbacks=[this.setSize.bind(this)]}h(c,[{key:"setSize",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:1,b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.camera.native.aspect=a/b;this.camera.native.updateProjectionMatrix();this.rendering&&this.rendering.setSize(a,b)}},{key:"trigger",value:function(){var a=this.container,b=a.offsetHeight,c=this.resolution,d=Number(a.offsetWidth*c.x).toFixed(),f=Number(b*c.y).toFixed();this.callbacks.forEach(function(a){a(d,f)})}},{key:"addAutoresize",value:function(){this.container=this.getContainer();this.resolution=this.getResolution();
this.params.auto&&window.addEventListener("resize",this.trigger.bind(this))}},{key:"addCallback",value:function(a){this.callbacks.push(a)}},{key:"manager",value:function(a){a.define("resize");this.rendering=a.get("renderer");this.camera=a.get("camera");this.getResolution=function(){return a.use("rendering").params.resolution};this.getContainer=function(){return a.get("container")};this.addAutoresize()}}]);return c}(),Lb=function(){return d.ShaderMaterial.call(this,{type:"CopyMaterial",uniforms:{tDiffuse:new d.Uniform(null),
opacity:new d.Uniform(1)},fragmentShader:"uniform sampler2D tDiffuse;\r\nuniform float opacity;\r\n\r\nvarying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvec4 texel = texture2D(tDiffuse, vUv);\r\n\tgl_FragColor = opacity * texel;\r\n\r\n}\r\n",vertexShader:"varying vec2 vUv;\r\n\r\nvoid main() {\r\n\r\n\tvUv = uv;\r\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\r\n\r\n}\r\n",depthWrite:!1,depthTest:!1})||this};$jscomp.inherits(Lb,d.ShaderMaterial);var x=function(c,a,b){c=
void 0===c?new d.Scene:c;a=void 0===a?new d.OrthographicCamera(-1,1,1,-1,0,1):a;b=void 0===b?new d.Mesh(new d.PlaneBufferGeometry(2,2),null):b;this.name="Pass";this.scene=c;this.camera=a;this.quad=b;null!==this.quad&&(this.quad.frustumCulled=!1,null!==this.scene&&this.scene.add(this.quad));this.needsSwap=!1;this.enabled=!0;this.renderToScreen=!1};x.prototype.render=function(c,a,b,d,e){throw Error("Render method not implemented!");};x.prototype.setSize=function(c,a){};x.prototype.initialise=function(c,
a){};x.prototype.dispose=function(){var c=Object.keys(this),a,c=$jscomp.makeIterator(c);for(a=c.next();!a.done;a=c.next())a=a.value,null!==this[a]&&"function"===typeof this[a].dispose&&(this[a].dispose(),this[a]=null)};var Mb=new d.Color,pa=function(c){c=void 0===c?{}:c;var a=x.call(this,null,null,null)||this;a.name="ClearPass";a.clearColor=void 0!==c.clearColor?c.clearColor:null;a.clearAlpha=void 0!==c.clearAlpha?c.clearAlpha:0;return a};$jscomp.inherits(pa,x);pa.prototype.render=function(c,a){var b=
this.clearColor;if(null!==b){Mb.copy(c.getClearColor());var d=c.getClearAlpha();c.setClearColor(b,this.clearAlpha)}c.setRenderTarget(this.renderToScreen?null:a);c.clear();null!==b&&c.setClearColor(Mb,d)};var qa=function(){var c=x.call(this,null,null,null)||this;c.name="ClearMaskPass";return c};$jscomp.inherits(qa,x);qa.prototype.render=function(c){c.state.buffers.stencil.setTest(!1)};var ra=function(c,a,b){b=void 0===b?{}:b;c=x.call(this,c,a,null)||this;c.name="RenderPass";c.clearPass=new pa(b);c.overrideMaterial=
void 0!==b.overrideMaterial?b.overrideMaterial:null;c.clearDepth=void 0!==b.clearDepth?b.clearDepth:!1;c.clear=void 0!==b.clear?b.clear:!0;return c};$jscomp.inherits(ra,x);ra.prototype.render=function(c,a){var b=this.scene;a=this.renderToScreen?null:a;this.clear?this.clearPass.render(c,a):this.clearDepth&&(c.setRenderTarget(a),c.clearDepth());b.overrideMaterial=this.overrideMaterial;c.render(b,this.camera,a);b.overrideMaterial=null};var sa=function(c,a){c=x.call(this,c,a,null)||this;c.name="MaskPass";
c.inverse=!1;c.clearStencil=!0;return c};$jscomp.inherits(sa,x);sa.prototype.render=function(c,a,b){var d=c.context,e=c.state,f=this.scene,g=this.camera,l=this.inverse?0:1,m=1-l;e.buffers.color.setMask(!1);e.buffers.depth.setMask(!1);e.buffers.color.setLocked(!0);e.buffers.depth.setLocked(!0);e.buffers.stencil.setTest(!0);e.buffers.stencil.setOp(d.REPLACE,d.REPLACE,d.REPLACE);e.buffers.stencil.setFunc(d.ALWAYS,l,4294967295);e.buffers.stencil.setClear(m);this.clearStencil&&(c.setRenderTarget(a),c.clearStencil(),
c.setRenderTarget(b),c.clearStencil());c.render(f,g,a);c.render(f,g,b);e.buffers.color.setLocked(!1);e.buffers.depth.setLocked(!1);e.buffers.stencil.setFunc(d.EQUAL,1,4294967295);e.buffers.stencil.setOp(d.KEEP,d.KEEP,d.KEEP)};var N=function(c,a){a=void 0===a?"tDiffuse":a;var b=x.call(this)||this;b.name="ShaderPass";b.needsSwap=!0;b.material=c;b.quad.material=b.material;b.textureID=a;return b};$jscomp.inherits(N,x);N.prototype.render=function(c,a,b){void 0!==this.material.uniforms[this.textureID]&&
(this.material.uniforms[this.textureID].value=a.texture);c.render(this.scene,this.camera,this.renderToScreen?null:b)};new d.Vector3;new d.Vector3;var B=function(c,a){a=void 0===a?{}:a;this.renderer=void 0===c?null:c;this.writeBuffer=this.readBuffer=null;null!==this.renderer&&(this.renderer.autoClear=!1,this.readBuffer=this.createBuffer(void 0!==a.depthBuffer?a.depthBuffer:!0,void 0!==a.stencilBuffer?a.stencilBuffer:!1,void 0!==a.depthTexture?a.depthTexture:!1),this.writeBuffer=this.readBuffer.clone());
this.copyPass=new N(new Lb);this.passes=[]};B.prototype.replaceRenderer=function(c){var a=this.renderer;if(null!==a&&a!==c){this.renderer=c;this.renderer.autoClear=!1;var b=a.domElement.parentNode;var d=a.getSize();var e=c.getSize();null!==b&&(b.removeChild(a.domElement),b.appendChild(c.domElement));d.width===e.width&&d.height===e.height||this.setSize()}return a};B.prototype.createBuffer=function(c,a,b){var e=this.renderer.getSize(),w=this.renderer.getPixelRatio(),f=this.renderer.context.getContextAttributes().alpha;
c=new d.WebGLRenderTarget(e.width*w,e.height*w,{minFilter:d.LinearFilter,magFilter:d.LinearFilter,format:f?d.RGBAFormat:d.RGBFormat,depthBuffer:c,stencilBuffer:a,depthTexture:b?new d.DepthTexture:null});b&&a&&(c.depthTexture.format=d.DepthStencilFormat,c.depthTexture.type=d.UnsignedInt248Type);c.texture.name="EffectComposer.Buffer";c.texture.generateMipmaps=!1;return c};B.prototype.addPass=function(c,a){var b=this.renderer,d=b.getSize(),e=b.getPixelRatio();c.setSize(d.width*e,d.height*e);c.initialise(b,
b.context.getContextAttributes().alpha);void 0!==a?this.passes.splice(a,0,c):this.passes.push(c)};B.prototype.removePass=function(c){this.passes.splice(this.passes.indexOf(c),1)};B.prototype.render=function(c){var a=this.passes,b=this.renderer,d=this.copyPass,e=this.readBuffer,f=this.writeBuffer,g=!1,l;var m=0;for(l=a.length;m<l;++m){var h=a[m];if(h.enabled){h.render(b,e,f,c,g);if(h.needsSwap){if(g){var k=b.context;k.stencilFunc(k.NOTEQUAL,1,4294967295);d.render(b,e,f);k.stencilFunc(k.EQUAL,1,4294967295)}k=
e;e=f;f=k}h instanceof sa?g=!0:h instanceof qa&&(g=!1)}}};B.prototype.setSize=function(c,a){var b=this.passes,d=this.renderer.getSize(),e=this.renderer.getPixelRatio();if(void 0===c||void 0===a)c=d.width,a=d.height;this.renderer.setSize(c,a);c*=e;a*=e;this.readBuffer.setSize(c,a);this.writeBuffer.setSize(c,a);d=0;for(e=b.length;d<e;++d)b[d].setSize(c,a)};B.prototype.reset=function(c){var a=this.readBuffer.depthBuffer,b=this.readBuffer.stencilBuffer,d=null!==this.readBuffer.depthTexture;this.dispose(void 0===
c?this.createBuffer(a,b,d):c)};B.prototype.dispose=function(c){var a=this.passes;null!==this.readBuffer&&null!==this.writeBuffer&&(this.readBuffer.dispose(),this.writeBuffer.dispose(),this.writeBuffer=this.readBuffer=null);for(;0<a.length;)a.pop().dispose();void 0!==c?(this.readBuffer=c,this.writeBuffer=this.readBuffer.clone()):this.copyPass.dispose()};$jscomp.global.Object.defineProperties(B.prototype,{depthTexture:{configurable:!0,enumerable:!0,get:function(){return this.readBuffer.depthTexture},
set:function(c){this.readBuffer.depthTexture=c;this.writeBuffer.depthTexture=c}}});var Nb=function(c,a){c[a]||((2<arguments.length&&void 0!==arguments[2]?arguments[2]:1)&&console.warn("@PostProcessorModule: pass."+a+"() was not found.",c),c[a]=function(){})},Ic=function(){function c(){var a=this,b=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{debug:!0}).debug;g(this,c);this.currentPass=null;this.defer=new Promise(function(b){a.resolve=b});this.debug=b}h(c,[{key:"manager",value:function(a){var b=
this;a.define("postprocessor");this.effects=a.use("rendering").effects;this.renderer=a.get("renderer");this.scene=a.get("scene");this.camera=a.get("camera");this.composer=new B(this.renderer);a.use("rendering").stop();var c=this.composer;this.renderLoop=(new H(function(a){return c.render(a.getDelta())})).start(a.handler);a.update({renderer:function(a){b.composer.replaceRenderer(a)},scene:function(a){b.scene=a},camera:function(a){b.camera=a}});this.resolve()}},{key:"render",value:function(){var a=
this;this.defer.then(function(){var b=new ra(a.scene,a.camera.native);a.composer.addPass(b);a.currentPass=b});return this}},{key:"pass",value:function(a){var b=this;this.defer.then(function(){Nb(a,"setSize",b.debug);Nb(a,"initialise",b.debug);b.composer.addPass(a);b.currentPass=a});return this}},{key:"shader",value:function(a){var b=this,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"readBuffer";this.defer.then(function(){a.uniforms[c]||(a.uniforms[c]={value:null});var d=new N(a,c);b.composer.addPass(d);
b.currentPass=d});return this}},{key:"get",value:function(a){return a?this.composer.passes.filter(function(b){return b.name===a})[0]:this.currentPass}},{key:"to",value:function(a){this.currentPass=a}},{key:"renderToScreen",value:function(){var a=this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;this.defer.then(function(){a.currentPass.renderToScreen=b});return this}},{key:"name",value:function(a){var b=this;this.defer.then(function(){b.currentPass.name=a});return this}}]);return c}(),
ta=function(){function c(){g(this,c)}h(c,[{key:"manager",value:function(a){a.define("events");this.element=a.get("renderer").domElement}},{key:"patchEvents",value:function(a,b){(2<arguments.length&&void 0!==arguments[2]?arguments[2]:[]).forEach(function(c){return a.addEventListener(c,function(a){return b.emit(c,a)})})}},{key:"integrate",value:function(a){var b=a.element;a=a.patchEvents;a(b,this,"mousemove mouseup contextmenu mousedown click wheel touchstart touchend touchmove keydown".split(" "));
a(b,this,["keydown","keyup","keypress"])}}]);return c}(),Jc=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!1;g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));c.mouse=new d.Vector2;c.raycaster=new d.Raycaster;c.world=null;c.canvas=null;c.projectionPlane=new d.Plane(new d.Vector3(0,0,1),0);c.globalMovement=b;return c}n(a,c);h(a,[{key:"update",value:function(a,c,d){var b=this.canvas.getBoundingClientRect();d=d||a.clientY;this.mouse.x=
((c||a.clientX)-b.left)/(b.right-b.left)*2-1;this.mouse.y=2*-((d-b.top)/(b.bottom-b.top))+1;this.projectionPlane.normal.copy(this.camera.getWorldDirection());this.raycaster.setFromCamera(this.mouse,this.camera);this.emit("move")}},{key:"manager",value:function(a){a.define("mouse");a.require("events",function(){return new ta});this.canvas=a.get("renderer").domElement;this.camera=a.get("camera").native}},{key:"integrate",value:function(a){var b=this;["click","mousedown","mouseup","mousemove"].forEach(function(c){return b.on(c,
function(b){return a.emit(c,b)})});a.globalX=0;a.globalY=0;this.on("mousemove",function(b){null!==document.pointerLockElement?(a.globalX+=b.movementX,a.globalY+=b.movementY,a.update(b,a.globalX,a.globalY)):a.update(b)})}},{key:"track",value:function(a){var b=this,c=!1;this.on("move",function(){b.hovers(a)?c?a.emit("mousemove"):(a.emit("mouseover"),c=!0):c&&(a.emit("mouseout"),c=!1)});this.on("click",function(){c?a.emit("click"):a.emit("offClick")});this.on("mousedown",function(){c&&a.emit("mousedown")});
this.on("mouseup",function(){c&&a.emit("mouseup")})}},{key:"intersection",value:function(a){return this.raycaster.intersectObject(a.native)}},{key:"project",value:function(){return this.raycaster.ray.intersectPlane(0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.projectionPlane)}},{key:"hovers",value:function(a){var b=this.intersection(a)[0];return b?b.object===a.native:!1}},{key:"ray",get:function(){return this.raycaster.ray}},{key:"x",get:function(){return this.mouse.x}},{key:"y",get:function(){return this.mouse.y}}]);
return a}(ua),Ob=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,c);this.params=Object.assign({controls:!1,fix:function(a){return a},update:function(a){this.controls.update(a.getDelta())}},a);this.controls=this.params.controls;this.update=this.params.update}h(c,null,[{key:"from",value:function(a){return new c({controls:a})}}]);h(c,[{key:"manager",value:function(a){a.require("events",function(){return new ta})}},{key:"setControls",value:function(a){this.controls=
a;return this}},{key:"setUpdate",value:function(a){this.update=a;return this}},{key:"integrate",value:function(a){a.updateLoop=new H(a.update.bind(a));a.updateLoop.start(this)}}]);return c}(),Kc=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];g(this,c);this.params=Object.assign({color:15716789,density:.02,near:10,far:1E3},a);b&&"exp2"!==b?"linear"===b&&(this.fog=new d.Fog(this.params.color,this.params.near,this.params.far)):this.fog=new d.FogExp2(this.params.color,
this.params.density)}h(c,[{key:"manager",value:function(a){a.set("fog",this.fog);a.get("scene").fog=this.fog}}]);return c}(),Lc=function(c,a){return c===a||c&&c.equals&&c.equals(a)?!0:!1},Mc=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Lc;g(this,c);this.store=q(c.actionGenerate(a));this.configuration={};this.prevConfig=this.currentConfig="default"}h(c,null,[{key:"actionGenerate",value:function(a){return function(){var b=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:[{},""],c=arguments[1],d=c.key,c=c.data;if(a(b[0][d],c))return b;b[0][d]=c;b[1]=d;return b}}}]);h(c,[{key:"default",value:function(a){this.config({default:a});return this}},{key:"setEqualCheck",value:function(a){this.store.replaceReducer(c.actionGenerate(a))}},{key:"manager",value:function(a){a.define("state")}},{key:"config",value:function(a){for(var b in a)b&&(this.configuration[b]="default"===b?a[b]:Object.assign({},this.configuration.default,a[b]))}},{key:"update",value:function(){var a=
this,b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.store.subscribe(function(){var c=a.store.getState(),d=Aa(c,2),c=d[0],d=d[1],f=b[d];f&&f(c[d])})}},{key:"to",value:function(a){this.prevConfig=this.currentConfig;this.currentConfig=a;this.set(this.configuration[a]?this.configuration[a]:this.configuration.default)}},{key:"set",value:function(a){for(var b in a)b&&this.store.dispatch({type:"ADD",key:b,data:a[b]})}},{key:"get",value:function(a){return this.store.getState()[0][a]}},{key:"prev",
value:function(a,b,c){return this.prevConfig===a?b:c}},{key:"current",value:function(a,b,c){return this.currentConfig===a?b:c}}]);return c}(),Oc=function(c){function a(b,c,e){g(this,a);var f=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));f.object=b;f.domElement=void 0===c?document:c;f.eventHandler=e;f.enabled=!0;f.target=new d.Vector3;f.minDistance=0;f.maxDistance=Infinity;f.minZoom=0;f.maxZoom=Infinity;f.minPolarAngle=0;f.maxPolarAngle=Math.PI;f.minAzimuthAngle=-Infinity;f.maxAzimuthAngle=
Infinity;f.enableDamping=!1;f.dampingFactor=.25;f.enableZoom=!0;f.zoomSpeed=1;f.enableRotate=!0;f.rotateSpeed=1;f.enablePan=!0;f.keyPanSpeed=7;f.autoRotate=!1;f.autoRotateSpeed=2;f.enableKeys=!0;f.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};f.mouseButtons={ORBIT:d.MOUSE.LEFT,ZOOM:d.MOUSE.MIDDLE,PAN:d.MOUSE.RIGHT};f.target0=f.target.clone();f.position0=f.object.position.clone();f.zoom0=f.object.zoom;f.getPolarAngle=function(){return n.phi};f.getAzimuthalAngle=function(){return n.theta};f.reset=function(){f.target.copy(f.target0);
f.object.position.copy(f.position0);f.object.zoom=f.zoom0;f.object.updateProjectionMatrix();f.dispatchEvent(l);f.update();k=h.NONE};f.update=function(){var a=new d.Vector3,c=(new d.Quaternion).setFromUnitVectors(b.up,new d.Vector3(0,1,0)),e=c.clone().inverse(),g=new d.Vector3,p=new d.Quaternion;var m=f.object.position;a.copy(m).sub(f.target);a.applyQuaternion(c);n.setFromVector3(a);f.autoRotate&&k===h.NONE&&(q.theta-=2*Math.PI/60/60*f.autoRotateSpeed);n.theta+=q.theta;n.phi+=q.phi;n.theta=Math.max(f.minAzimuthAngle,
Math.min(f.maxAzimuthAngle,n.theta));n.phi=Math.max(f.minPolarAngle,Math.min(f.maxPolarAngle,n.phi));n.makeSafe();n.radius*=t;n.radius=Math.max(f.minDistance,Math.min(f.maxDistance,n.radius));f.target.add(u);a.setFromSpherical(n);a.applyQuaternion(e);m.copy(f.target).add(a);f.object.lookAt(f.target);!0===f.enableDamping?(q.theta*=1-f.dampingFactor,q.phi*=1-f.dampingFactor):q.set(0,0,0);t=1;u.set(0,0,0);v||g.distanceToSquared(f.object.position)>w||8*(1-p.dot(f.object.quaternion))>w?(f.dispatchEvent(l),
g.copy(f.object.position),p.copy(f.object.quaternion),v=!1,a=!0):a=!1;return a};f.dispose=function(){f.domElement.removeEventListener("contextmenu",U,!1);f.domElement.removeEventListener("mousedown",N,!1);f.domElement.removeEventListener("wheel",P,!1);f.domElement.removeEventListener("touchstart",R,!1);f.domElement.removeEventListener("touchend",T,!1);f.domElement.removeEventListener("touchmove",S,!1);document.removeEventListener("mousemove",M,!1);document.removeEventListener("mouseup",O,!1);window.removeEventListener("keydown",
Q,!1)};var l={type:"change"},p={type:"start"},m={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},k=h.NONE,w=1E-6,n=new d.Spherical,q=new d.Spherical,t=1,u=new d.Vector3,v=!1,x=new d.Vector2,y=new d.Vector2,z=new d.Vector2,A=new d.Vector2,B=new d.Vector2,C=new d.Vector2,D=new d.Vector2,E=new d.Vector2,F=new d.Vector2,G=function(){return Math.pow(.95,f.zoomSpeed)},H=function(){var a=new d.Vector3;return function(b,c){a.setFromMatrixColumn(c,0);a.multiplyScalar(-b);
u.add(a)}}(),K=function(){var a=new d.Vector3;return function(b,c){a.setFromMatrixColumn(c,1);a.multiplyScalar(b);u.add(a)}}(),V=function(){var a=new d.Vector3;return function(b,c){var e=f.domElement===document?f.domElement.body:f.domElement;if(f.object instanceof d.PerspectiveCamera){a.copy(f.object.position).sub(f.target);var g=a.length(),g=g*Math.tan(f.object.fov/2*Math.PI/180);H(2*b*g/e.clientHeight,f.object.matrix);K(2*c*g/e.clientHeight,f.object.matrix)}else f.object instanceof d.OrthographicCamera?
(H(b*(f.object.right-f.object.left)/f.object.zoom/e.clientWidth,f.object.matrix),K(c*(f.object.top-f.object.bottom)/f.object.zoom/e.clientHeight,f.object.matrix)):(console.warn("WARNING: OrbitControlsModule.js encountered an unknown camera type - pan disabled."),f.enablePan=!1)}}(),I=function(a){f.object instanceof d.PerspectiveCamera?t/=a:f.object instanceof d.OrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom*a)),f.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControlsModule.js encountered an unknown camera type - dolly/zoom disabled."),
f.enableZoom=!1)},L=function(a){f.object instanceof d.PerspectiveCamera?t*=a:f.object instanceof d.OrthographicCamera?(f.object.zoom=Math.max(f.minZoom,Math.min(f.maxZoom,f.object.zoom/a)),f.object.updateProjectionMatrix(),v=!0):(console.warn("WARNING: OrbitControlsModule.js encountered an unknown camera type - dolly/zoom disabled."),f.enableZoom=!1)},N=function(a){if(!1!==f.enabled){a.preventDefault();if(a.button===f.mouseButtons.ORBIT){if(!1===f.enableRotate)return;x.set(a.clientX,a.clientY);k=
h.ROTATE}else if(a.button===f.mouseButtons.ZOOM){if(!1===f.enableZoom)return;D.set(a.clientX,a.clientY);k=h.DOLLY}else if(a.button===f.mouseButtons.PAN){if(!1===f.enablePan)return;A.set(a.clientX,a.clientY);k=h.PAN}k!==h.NONE&&(f.eventHandler.on("mousemove",M,!1),f.eventHandler.on("mouseup",O,!1),f.dispatchEvent(p))}},M=function(a){!1!==f.enabled&&(a.preventDefault(),k===h.ROTATE?!1!==f.enableRotate&&(y.set(a.clientX,a.clientY),z.subVectors(y,x),a=f.domElement===document?f.domElement.body:f.domElement,
q.theta-=2*Math.PI*z.x/a.clientWidth*f.rotateSpeed,q.phi-=2*Math.PI*z.y/a.clientHeight*f.rotateSpeed,x.copy(y),f.update()):k===h.DOLLY?!1!==f.enableZoom&&(E.set(a.clientX,a.clientY),F.subVectors(E,D),0<F.y?I(G()):0>F.y&&L(G()),D.copy(E),f.update()):k===h.PAN&&!1!==f.enablePan&&(B.set(a.clientX,a.clientY),C.subVectors(B,A),V(C.x,C.y),A.copy(B),f.update()))},O=function Nc(a){!1!==f.enabled&&(document.removeEventListener("mousemove",M,!1),document.removeEventListener("mouseup",Nc,!1),f.dispatchEvent(m),
k=h.NONE)},P=function(a){!1===f.enabled||!1===f.enableZoom||k!==h.NONE&&k!==h.ROTATE||(a.preventDefault(),a.stopPropagation(),0>a.deltaY?L(G()):0<a.deltaY&&I(G()),f.update(),f.dispatchEvent(p),f.dispatchEvent(m))},Q=function(a){if(!1!==f.enabled&&!1!==f.enableKeys&&!1!==f.enablePan)switch(a.keyCode){case f.keys.UP:V(0,f.keyPanSpeed);f.update();break;case f.keys.BOTTOM:V(0,-f.keyPanSpeed);f.update();break;case f.keys.LEFT:V(f.keyPanSpeed,0);f.update();break;case f.keys.RIGHT:V(-f.keyPanSpeed,0),f.update()}},
R=function(a){if(!1!==f.enabled){switch(a.touches.length){case 1:if(!1===f.enableRotate)return;x.set(a.touches[0].pageX,a.touches[0].pageY);k=h.TOUCH_ROTATE;break;case 2:if(!1===f.enableZoom)return;var b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-a.touches[1].pageY;D.set(0,Math.sqrt(b*b+a*a));k=h.TOUCH_DOLLY;break;case 3:if(!1===f.enablePan)return;A.set(a.touches[0].pageX,a.touches[0].pageY);k=h.TOUCH_PAN;break;default:k=h.NONE}k!==h.NONE&&f.dispatchEvent(p)}},S=function(a){if(!1!==
f.enabled)switch(a.preventDefault(),a.stopPropagation(),a.touches.length){case 1:if(!1===f.enableRotate)break;if(k!==h.TOUCH_ROTATE)break;y.set(a.touches[0].pageX,a.touches[0].pageY);z.subVectors(y,x);var b=f.domElement===document?f.domElement.body:f.domElement;q.theta-=2*Math.PI*z.x/b.clientWidth*f.rotateSpeed;q.phi-=2*Math.PI*z.y/b.clientHeight*f.rotateSpeed;x.copy(y);f.update();break;case 2:if(!1===f.enableZoom)break;if(k!==h.TOUCH_DOLLY)break;b=a.touches[0].pageX-a.touches[1].pageX;a=a.touches[0].pageY-
a.touches[1].pageY;E.set(0,Math.sqrt(b*b+a*a));F.subVectors(E,D);0<F.y?L(G()):0>F.y&&I(G());D.copy(E);f.update();break;case 3:if(!1===f.enablePan)break;if(k!==h.TOUCH_PAN)break;B.set(a.touches[0].pageX,a.touches[0].pageY);C.subVectors(B,A);V(C.x,C.y);A.copy(B);f.update();break;default:k=h.NONE}},T=function(a){!1!==f.enabled&&(f.dispatchEvent(m),k=h.NONE)},U=function(a){a.preventDefault()};f.eventHandler.on("contextmenu",U,!1);f.eventHandler.on("mousedown",N,!1);f.eventHandler.on("wheel",P,!1);f.eventHandler.on("touchstart",
R,!1);f.eventHandler.on("touchend",T,!1);f.eventHandler.on("touchmove",S,!1);f.eventHandler.on("keydown",Q,!1);f.update();return f}n(a,c);h(a,[{key:"center",get:function(){console.warn("OrbitControls: .center has been renamed to .target");return this.target}},{key:"noZoom",get:function(){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");return!this.enableZoom},set:function(a){console.warn("OrbitControls: .noZoom has been deprecated. Use .enableZoom instead.");this.enableZoom=
!a}},{key:"noRotate",get:function(){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");return!this.enableRotate},set:function(a){console.warn("OrbitControls: .noRotate has been deprecated. Use .enableRotate instead.");this.enableRotate=!a}},{key:"noPan",get:function(){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead.");return!this.enablePan},set:function(a){console.warn("OrbitControls: .noPan has been deprecated. Use .enablePan instead.");
this.enablePan=!a}},{key:"noKeys",get:function(){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");return!this.enableKeys},set:function(a){console.warn("OrbitControls: .noKeys has been deprecated. Use .enableKeys instead.");this.enableKeys=!a}},{key:"staticMoving",get:function(){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");return!this.enableDamping},set:function(a){console.warn("OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead.");
this.enableDamping=!a}},{key:"dynamicDampingFactor",get:function(){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");return this.dampingFactor},set:function(a){console.warn("OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead.");this.dampingFactor=a}}]);return a}(d.EventDispatcher),Pc=function(c){function a(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,a);var c=r(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,
b));c.params=Object.assign({follow:!1,object:null,target:new d.Vector3(0,0,0)},b);return c}n(a,c);h(a,[{key:"manager",value:function(b){u(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"manager",this).call(this,b);var c=this.params,d=c.object,f=c.follow,e=c.target,c=d?d.native:b.get("camera").native,g=new Oc(c,b.get("element"),b.handler),f=f?function(a){g.update(a.getDelta());g.target.copy(e)}:function(a){g.update(a.getDelta())};this.setControls(g);this.setUpdate(f);b.update({camera:function(a){d||
(g.object=a.native)}});g.target.copy(e)}}]);return a}(Ob),Qc=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,c);this.params=Object.assign({attributes:!1},a)}h(c,[{key:"integrate",value:function(a){var b=this;a=a.params;this.g_=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.buildGeometry&&(this.native.geometry=this.buildGeometry(this.updateParams({geometry:a})))};if(a.attributes){a=function(a){a&&Object.defineProperty(b,
"g_"+a,{get:function(){return this.native.geometry.parameters[a]},set:function(b){this.native.geometry=this.buildGeometry(this.updateParams({geometry:Pb({},a,b)}))},configurable:!0,enumerable:!0})};for(var c in this.params.geometry)a(c)}}}]);return c}(),Rc=new d.TextureLoader,Sc=function(){function c(){var a=this;g(this,c);this.textures=[];this.bridge={material:function(a,b){b.textures.forEach(function(b){a[b[0]]=b[1]});return a}};for(var b=arguments.length,e=Array(b),h=0;h<b;h++)e[h]=arguments[h];
e.forEach(function(b){var c=b.url,e=b.type,e=void 0===e?"map":e,f=b.offset,f=void 0===f?new d.Vector2(0,0):f,g=b.repeat,g=void 0===g?new d.Vector2(1,1):g,h=b.wrap,h=void 0===h?d.RepeatWrapping:h,k=b.mapping,k=void 0===k?d.UVMapping:k;b=b.fix;b=void 0===b?function(a){return a}:b;c=Rc.load(c);0<h.length?(c.wrapS=h[0],c.wrapT=h[1]):c.wrapS=c.wrapT=h;c.mapping=k;c.offset.copy(f);c.repeat.copy(g);c.magFilter=d.NearestFilter;c.minFilter=d.LinearMipMapLinearFilter;a.textures.push([e,b(c)])})}h(c,null,[{key:"load",
value:function(a){return(new c({url:a})).textures[0][1]}}]);return c}(),Tc=function(){function c(a,b){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};g(this,c);this.bridge={mesh:function(a,b){a.geometry.skeleton=a.skeleton;b.mixer=new d.AnimationMixer(a.geometry);b.clips=a.geometry.animations;return a}};this.params=Object.assign({speed:1},e);this.clock=new d.Clock;this.app=a;this.isDeferred=b}h(c,[{key:"play",value:function(a){a=d.AnimationClip.findByName(this.clips,a);this.mixer.clipAction(a).play()}},
{key:"update",value:function(){this.mixer&&this.mixer.update(this.clock.getDelta()*this.params.speed)}},{key:"integrate",value:function(a){a.loop=new H(function(){a.update()});a.isDeferred||a.loop.start(a.app)}},{key:"manager",value:function(a){a.define("animation")}}]);return c}(),Uc=function(){function c(a,b){g(this,c);this.name=a;this.data=b}h(c,[{key:"manager",value:function(a){a.set(this.name,this.data)}}]);return c}(),Vc=function(c){function a(b){var c;g(this,a);console.warn("Model is deprecated. Use Importer instead.");
b.geometry&&(b.url=b.geometry.path,b.loader=b.geometry.loader);for(var d=arguments.length,e=Array(1<d?d-1:0),h=1;h<d;h++)e[h-1]=arguments[h];return r(this,(c=a.__proto__||Object.getPrototypeOf(a)).call.apply(c,[this,b].concat(e)))}n(a,c);return a}(rb),Wc=function(){function c(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};g(this,c);console.warn("CameraModule is deprecated. Use DefineModule instead.");this.camera=new gb(a)}h(c,[{key:"integrate",value:function(a){this.add(a.camera)}},
{key:"manager",value:function(a){a.set("camera",this.camera)}}]);return c}();e.Component=C;e.MeshComponent=m;e.LightComponent=y;e.CameraComponent=D;e.App=$b;e.Loop=H;e.ModuleManager=O;e.AmbientLight=ac;e.DirectionalLight=bc;e.HemisphereLight=cc;e.PointLight=dc;e.SpotLight=ec;e.AreaLight=fc;e.CubeCamera=gc;e.OrthographicCamera=hc;e.PerspectiveCamera=gb;e.Box=ic;e.Circle=jc;e.Cone=kc;e.Cylinder=lc;e.Dodecahedron=mc;e.Extrude=nc;e.Icosahedron=oc;e.Lathe=pc;e.Line=qc;e.Importer=rb;e.Octahedron=rc;e.Parametric=
sc;e.Plane=tc;e.Polyhedron=uc;e.Ring=vc;e.Shape=wc;e.Sphere=xc;e.Tetrahedron=yc;e.Text=zc;e.Torus=Ac;e.Torusknot=Bc;e.Tube=Cc;e.Group=Dc;e.extend=M;e.instruct=E;e.transformData=F;e.toArray=function(c,a){for(var b=[],d=0,e=a.length;d<e;d++)b[d]=c[a[d]];return b};e.ElementModule=Ec;e.RenderingModule=Fc;e.SceneModule=Gc;e.ResizeModule=Hc;e.PostProcessorModule=Ic;e.VirtualMouseModule=Jc;e.EventsPatchModule=ta;e.ControlsModule=Ob;e.FogModule=Kc;e.StateModule=Mc;e.OrbitControlsModule=Pc;e.DynamicGeometryModule=
Qc;e.TextureModule=Sc;e.AnimationModule=Tc;e.DefineModule=Uc;e.Model=Vc;e.CameraModule=Wc;Object.defineProperty(e,"__esModule",{value:!0})});
