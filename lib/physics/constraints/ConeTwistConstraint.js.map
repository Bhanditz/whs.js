{"version":3,"sources":["physics/constraints/ConeTwistConstraint.js"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;;;;IAEa,mB,WAAA,mB;AACX,+BAAY,OAAZ,EAAqB,OAArB,EAA8B,QAA9B,EAAwC;AAAA;;AACtC,QAAI,aAAa,SAAjB,EAA4B,QAAQ,KAAR,CAAc,wDAAd;AAC5B,SAAK,IAAL,GAAY,WAAZ;AACA,SAAK,cAAL,GAAsB,CAAtB;AACA,SAAK,EAAL,GAAU,uBAAV;AACA,SAAK,KAAL,GAAa,QAAQ,MAArB;AACA,SAAK,OAAL,GAAe,QAAQ,QAAR,CAAiB,EAAhC;AACA,SAAK,SAAL,GAAiB,uCAA6B,QAA7B,EAAuC,OAAvC,EAAgD,KAAhD,EAAjB;AACA,SAAK,OAAL,GAAe,QAAQ,QAAR,CAAiB,EAAhC;AACA,SAAK,SAAL,GAAiB,uCAA6B,QAA7B,EAAuC,OAAvC,EAAgD,KAAhD,EAAjB;AACA,SAAK,KAAL,GAAa,EAAC,GAAG,QAAQ,QAAR,CAAiB,CAArB,EAAwB,GAAG,QAAQ,QAAR,CAAiB,CAA5C,EAA+C,GAAG,QAAQ,QAAR,CAAiB,CAAnE,EAAb;AACA,SAAK,KAAL,GAAa,EAAC,GAAG,QAAQ,QAAR,CAAiB,CAArB,EAAwB,GAAG,QAAQ,QAAR,CAAiB,CAA5C,EAA+C,GAAG,QAAQ,QAAR,CAAiB,CAAnE,EAAb;AACD;;;;oCAEe;AACd,aAAO;AACL,cAAM,KAAK,IADN;AAEL,YAAI,KAAK,EAFJ;AAGL,iBAAS,KAAK,OAHT;AAIL,iBAAS,KAAK,OAJT;AAKL,mBAAW,KAAK,SALX;AAML,mBAAW,KAAK,SANX;AAOL,eAAO,KAAK,KAPP;AAQL,eAAO,KAAK;AARP,OAAP;AAUD;;;6BAEQ,C,EAAG,C,EAAG,C,EAAG;AAChB,WAAK,KAAL,CAAW,OAAX,CAAmB,oBAAnB,EAAyC,EAAC,YAAY,KAAK,EAAlB,EAAsB,IAAtB,EAAyB,IAAzB,EAA4B,IAA5B,EAAzC;AACD;;;kCAEa;AACZ,WAAK,KAAL,CAAW,OAAX,CAAmB,uBAAnB,EAA4C,EAAC,YAAY,KAAK,EAAlB,EAA5C;AACD;;;uCAEkB,W,EAAa;AAC9B,WAAK,KAAL,CAAW,OAAX,CAAmB,8BAAnB,EAAmD,EAAC,YAAY,KAAK,EAAlB,EAAsB,wBAAtB,EAAnD;AACD;;;mCAEc,M,EAAQ;AACrB,UAAI,kBAAkB,MAAM,OAA5B,EACE,SAAS,IAAI,MAAM,UAAV,GAAuB,YAAvB,CAAoC,IAAI,MAAM,KAAV,CAAgB,OAAO,CAAvB,EAA0B,OAAO,CAAjC,EAAoC,OAAO,CAA3C,CAApC,CAAT,CADF,KAEK,IAAI,kBAAkB,MAAM,KAA5B,EACH,SAAS,IAAI,MAAM,UAAV,GAAuB,YAAvB,CAAoC,MAApC,CAAT,CADG,KAEA,IAAI,kBAAkB,MAAM,OAA5B,EACH,SAAS,IAAI,MAAM,UAAV,GAAuB,qBAAvB,CAA6C,MAA7C,CAAT;;AAEF,WAAK,KAAL,CAAW,OAAX,CAAmB,0BAAnB,EAA+C;AAC7C,oBAAY,KAAK,EAD4B;AAE7C,WAAG,OAAO,CAFmC;AAG7C,WAAG,OAAO,CAHmC;AAI7C,WAAG,OAAO,CAJmC;AAK7C,WAAG,OAAO;AALmC,OAA/C;AAOD","file":"ConeTwistConstraint.js","sourcesContent":["import {convertWorldPositionToObject, getObjectId} from '../api';\n\nexport class ConeTwistConstraint {\n  constructor(objecta, objectb, position) {\n    if (position === undefined) console.error('Both objects must be defined in a ConeTwistConstraint.');\n    this.type = 'conetwist';\n    this.appliedImpulse = 0;\n    this.id = getObjectId();\n    this.scene = objecta.parent;\n    this.objecta = objecta._physijs.id;\n    this.positiona = convertWorldPositionToObject(position, objecta).clone();\n    this.objectb = objectb._physijs.id;\n    this.positionb = convertWorldPositionToObject(position, objectb).clone();\n    this.axisa = {x: objecta.rotation.x, y: objecta.rotation.y, z: objecta.rotation.z};\n    this.axisb = {x: objectb.rotation.x, y: objectb.rotation.y, z: objectb.rotation.z};\n  }\n\n  getDefinition() {\n    return {\n      type: this.type,\n      id: this.id,\n      objecta: this.objecta,\n      objectb: this.objectb,\n      positiona: this.positiona,\n      positionb: this.positionb,\n      axisa: this.axisa,\n      axisb: this.axisb\n    };\n  }\n\n  setLimit(x, y, z) {\n    this.scene.execute('conetwist_setLimit', {constraint: this.id, x, y, z});\n  }\n\n  enableMotor() {\n    this.scene.execute('conetwist_enableMotor', {constraint: this.id});\n  }\n\n  setMaxMotorImpulse(max_impulse) {\n    this.scene.execute('conetwist_setMaxMotorImpulse', {constraint: this.id, max_impulse});\n  }\n\n  setMotorTarget(target) {\n    if (target instanceof THREE.Vector3)\n      target = new THREE.Quaternion().setFromEuler(new THREE.Euler(target.x, target.y, target.z));\n    else if (target instanceof THREE.Euler)\n      target = new THREE.Quaternion().setFromEuler(target);\n    else if (target instanceof THREE.Matrix4)\n      target = new THREE.Quaternion().setFromRotationMatrix(target);\n\n    this.scene.execute('conetwist_setMotorTarget', {\n      constraint: this.id,\n      x: target.x,\n      y: target.y,\n      z: target.z,\n      w: target.w\n    });\n  }\n}\n"]}