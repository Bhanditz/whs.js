{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///VRKit.js","webpack:///webpack/bootstrap b6d5373c3295711e533d","webpack:///./~/three-vrcontrols-module/dist/vr-controls.js","webpack:///./src/lib/VREffect.js","webpack:///./src/lib/WebVR.js","webpack:///external {\"commonjs\":\"whs\",\"commonjs2\":\"whs\",\"amd\":\"whs\",\"root\":\"WHS\"}","webpack:///external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}","webpack:///./src/index.js"],"names":["root","factory","exports","module","require","define","amd","VRKit","WHS","THREE","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","default","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","_three","VRControls","camera","onError","_this","vrDisplay","vrDisplays","standingMatrix","Matrix4","frameData","window","VRFrameData","navigator","getVRDisplays","then","displays","catch","console","warn","scale","standing","userHeight","pose","getFrameData","getPose","orientation","quaternion","fromArray","position","set","stageParameters","updateMatrix","sittingToStandingTransform","applyMatrix","setY","y","multiplyScalar","VREffect","renderer","gotVRDisplays","onVRDisplayPresentChange","wasPresenting","scope","isPresenting","eyeParamsL","getEyeParameters","eyeWidth","renderWidth","eyeHeight","renderHeight","rendererPixelRatio","getPixelRatio","rendererSize","getSize","setPixelRatio","setSize","width","height","rendererUpdateStyle","fovToNDCScaleOffset","fov","pxscale","leftTan","rightTan","pxoffset","pyscale","upTan","downTan","offset","fovPortToProjection","rightHanded","zNear","zFar","handednessScale","mobj","elements","scaleAndOffset","transpose","fovToProjection","DEG2RAD","Math","PI","tan","upDegrees","downDegrees","leftDegrees","rightDegrees","renderRectL","renderRectR","eyeTranslationL","Vector3","eyeTranslationR","getVRDisplay","setVRDisplay","updateStyle","canvas","domElement","defaultLeftBounds","defaultRightBounds","addEventListener","setFullScreen","boolean","Promise","resolve","reject","Error","requestPresent","source","exitPresent","requestAnimationFrame","f","cancelAnimationFrame","h","submitFrame","autoSubmitFrame","cameraL","PerspectiveCamera","layers","enable","cameraR","render","scene","renderTarget","forceClear","autoUpdate","updateMatrixWorld","eyeParamsR","Array","isArray","leftBounds","rightBounds","size","getLayers","layer","x","round","setRenderTarget","scissorTest","setScissorTest","autoClear","clear","parent","matrixWorld","decompose","translateOnAxis","depthNear","near","depthFar","far","projectionMatrix","leftProjectionMatrix","rightProjectionMatrix","fieldOfView","viewport","scissor","setViewport","setScissor","dispose","removeEventListener","WEBVR","isAvailable","checkAvailability","onDisplay","getMessage","message","container","document","createElement","style","left","top","right","zIndex","align","error","fontFamily","fontSize","fontStyle","lineHeight","backgroundColor","color","padding","margin","display","innerHTML","appendChild","getMessageContainer","getButton","button","bottom","border","cursor","textAlign","textContent","onclick","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","VRModule","_whs","_VREffect","_threeVrcontrolsModule","_threeVrcontrolsModule2","obj","_WebVR","params","arguments","assign","effect","manager","rendering","use","resize","addCallback","_params","body","_ControlsModule","_ref","intensity","controls","native","getPrototypeOf","ControlsModule"],"mappings":"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","file":"VRKit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"whs\"), require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"whs\", \"three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VRKit\"] = factory(require(\"whs\"), require(\"three\"));\n\telse\n\t\troot[\"VRKit\"] = factory(root[\"WHS\"], root[\"THREE\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"whs\"), require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"whs\", \"three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VRKit\"] = factory(require(\"whs\"), require(\"three\"));\n\telse\n\t\troot[\"VRKit\"] = factory(root[\"WHS\"], root[\"THREE\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _three = __webpack_require__(4);\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* @author dmarcos / https://github.com/dmarcos\n* @author mrdoob / http://mrdoob.com\n* @author halvves / https://github.com/halvves (i only es6 moduled it)\n*/\n\nvar VRControls = function () {\n  function VRControls(camera, onError) {\n    var _this = this;\n\n    _classCallCheck(this, VRControls);\n\n    this.camera = camera;\n    this.vrDisplay;\n    this.vrDisplays;\n    this.standingMatrix = new _three.Matrix4();\n    this.frameData = null;\n\n    if ('VRFrameData' in window) {\n      this.frameData = new VRFrameData();\n    }\n\n    if (navigator.getVRDisplays) {\n      navigator.getVRDisplays().then(function (displays) {\n        _this.vrDisplays = displays;\n        if (displays.length > 0) {\n          _this.vrDisplay = displays[0];\n        } else {\n          if (onError) onError('VR input not available.');\n        }\n      }).catch(function () {\n        console.warn('VRControls: Unable to get VR Displays');\n      });\n    }\n\n    // the Rift SDK returns the position in meters\n    // this scale factor allows the user to define how meters\n    // are converted to scene units.\n    this.scale = 1;\n\n    // If true will use \"standing space\" coordinate system where y=0 is the\n    // floor and x=0, z=0 is the center of the room.\n    this.standing = false;\n\n    // Distance from the users eyes to the floor in meters. Used when\n    // standing=true but the VRDisplay doesn't provide stageParameters.\n    this.userHeight = 1.6;\n  }\n\n  _createClass(VRControls, [{\n    key: 'getVRDisplay',\n    value: function getVRDisplay() {\n      return this.vrDisplay;\n    }\n  }, {\n    key: 'setVRDisplay',\n    value: function setVRDisplay(value) {\n      this.vrDisplay = value;\n    }\n  }, {\n    key: 'getVRDisplays',\n    value: function getVRDisplays() {\n      console.warn('VRControls: getVRDisplays() is being deprecated.');\n      return this.vrDisplays;\n    }\n  }, {\n    key: 'getStandingMatrix',\n    value: function getStandingMatrix() {\n      return this.standingMatrix;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var camera = this.camera;\n\n      if (this.vrDisplay) {\n        var pose = void 0;\n        if (this.vrDisplay.getFrameData) {\n          this.vrDisplay.getFrameData(this.frameData);\n          pose = this.frameData.pose;\n        } else if (this.vrDisplay.getPose) {\n          pose = this.vrDisplay.getPose();\n        }\n        if (pose.orientation !== null) {\n          camera.quaternion.fromArray(pose.orientation);\n        }\n        if (pose.position !== null) {\n          camera.position.fromArray(pose.position);\n        } else {\n          camera.position.set(0, 0, 0);\n        }\n        if (this.standing) {\n          if (this.vrDisplay.stageParameters) {\n            camera.updateMatrix();\n            this.standingMatrix.fromArray(this.vrDisplay.stageParameters.sittingToStandingTransform);\n            camera.applyMatrix(this.standingMatrix);\n          } else {\n            camera.position.setY(camera.position.y + this.userHeight);\n          }\n        }\n        camera.position.multiplyScalar(this.scale);\n      }\n    }\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.vrDisplay = null;\n    }\n  }]);\n\n  return VRControls;\n}();\n\nexports.default = VRControls;\n;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n *\n * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html\n *\n * Firefox: http://mozvr.com/downloads/\n * Chromium: https://webvr.info/get-chrome\n *\n */\n\nvar VREffect = exports.VREffect = function VREffect(renderer, onError) {\n\n\tvar vrDisplay, vrDisplays;\n\tvar eyeTranslationL = new THREE.Vector3();\n\tvar eyeTranslationR = new THREE.Vector3();\n\tvar renderRectL, renderRectR;\n\n\tvar frameData = null;\n\n\tif ('VRFrameData' in window) {\n\n\t\tframeData = new VRFrameData();\n\t}\n\n\tfunction gotVRDisplays(displays) {\n\n\t\tvrDisplays = displays;\n\n\t\tif (displays.length > 0) {\n\n\t\t\tvrDisplay = displays[0];\n\t\t} else {\n\n\t\t\tif (onError) onError('HMD not available');\n\t\t}\n\t}\n\n\tif (navigator.getVRDisplays) {\n\n\t\tnavigator.getVRDisplays().then(gotVRDisplays).catch(function () {\n\n\t\t\tconsole.warn('THREE.VREffect: Unable to get VR Displays');\n\t\t});\n\t}\n\n\t//\n\n\tthis.isPresenting = false;\n\tthis.scale = 1;\n\n\tvar scope = this;\n\n\tvar rendererSize = renderer.getSize();\n\tvar rendererUpdateStyle = false;\n\tvar rendererPixelRatio = renderer.getPixelRatio();\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\t};\n\n\tthis.setVRDisplay = function (value) {\n\n\t\tvrDisplay = value;\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\tconsole.warn('THREE.VREffect: getVRDisplays() is being deprecated.');\n\t\treturn vrDisplays;\n\t};\n\n\tthis.setSize = function (width, height, updateStyle) {\n\n\t\trendererSize = { width: width, height: height };\n\t\trendererUpdateStyle = updateStyle;\n\n\t\tif (scope.isPresenting) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters('left');\n\t\t\trenderer.setPixelRatio(1);\n\t\t\trenderer.setSize(eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false);\n\t\t} else {\n\n\t\t\trenderer.setPixelRatio(rendererPixelRatio);\n\t\t\trenderer.setSize(width, height, updateStyle);\n\t\t}\n\t};\n\n\t// fullscreen\n\n\tvar canvas = renderer.domElement;\n\tvar requestFullscreen;\n\tvar exitFullscreen;\n\tvar fullscreenElement;\n\tvar defaultLeftBounds = [0.0, 0.0, 0.5, 1.0];\n\tvar defaultRightBounds = [0.5, 0.0, 0.5, 1.0];\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tvar wasPresenting = scope.isPresenting;\n\t\tscope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;\n\n\t\tif (scope.isPresenting) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters('left');\n\t\t\tvar eyeWidth = eyeParamsL.renderWidth;\n\t\t\tvar eyeHeight = eyeParamsL.renderHeight;\n\n\t\t\tif (!wasPresenting) {\n\n\t\t\t\trendererPixelRatio = renderer.getPixelRatio();\n\t\t\t\trendererSize = renderer.getSize();\n\n\t\t\t\trenderer.setPixelRatio(1);\n\t\t\t\trenderer.setSize(eyeWidth * 2, eyeHeight, false);\n\t\t\t}\n\t\t} else if (wasPresenting) {\n\n\t\t\trenderer.setPixelRatio(rendererPixelRatio);\n\t\t\trenderer.setSize(rendererSize.width, rendererSize.height, rendererUpdateStyle);\n\t\t}\n\t}\n\n\twindow.addEventListener('vrdisplaypresentchange', onVRDisplayPresentChange, false);\n\n\tthis.setFullScreen = function (boolean) {\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (vrDisplay === undefined) {\n\n\t\t\t\treject(new Error('No VR hardware found.'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (scope.isPresenting === boolean) {\n\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (boolean) {\n\n\t\t\t\tresolve(vrDisplay.requestPresent([{ source: canvas }]));\n\t\t\t} else {\n\n\t\t\t\tresolve(vrDisplay.exitPresent());\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.requestPresent = function () {\n\n\t\treturn this.setFullScreen(true);\n\t};\n\n\tthis.exitPresent = function () {\n\n\t\treturn this.setFullScreen(false);\n\t};\n\n\tthis.requestAnimationFrame = function (f) {\n\n\t\tif (vrDisplay !== undefined) {\n\n\t\t\treturn vrDisplay.requestAnimationFrame(f);\n\t\t} else {\n\n\t\t\treturn window.requestAnimationFrame(f);\n\t\t}\n\t};\n\n\tthis.cancelAnimationFrame = function (h) {\n\n\t\tif (vrDisplay !== undefined) {\n\n\t\t\tvrDisplay.cancelAnimationFrame(h);\n\t\t} else {\n\n\t\t\twindow.cancelAnimationFrame(h);\n\t\t}\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif (vrDisplay !== undefined && scope.isPresenting) {\n\n\t\t\tvrDisplay.submitFrame();\n\t\t}\n\t};\n\n\tthis.autoSubmitFrame = true;\n\n\t// render\n\n\tvar cameraL = new THREE.PerspectiveCamera();\n\tcameraL.layers.enable(1);\n\n\tvar cameraR = new THREE.PerspectiveCamera();\n\tcameraR.layers.enable(2);\n\n\tthis.render = function (scene, camera, renderTarget, forceClear) {\n\n\t\tif (vrDisplay && scope.isPresenting) {\n\n\t\t\tvar autoUpdate = scene.autoUpdate;\n\n\t\t\tif (autoUpdate) {\n\n\t\t\t\tscene.updateMatrixWorld();\n\t\t\t\tscene.autoUpdate = false;\n\t\t\t}\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters('left');\n\t\t\tvar eyeParamsR = vrDisplay.getEyeParameters('right');\n\n\t\t\teyeTranslationL.fromArray(eyeParamsL.offset);\n\t\t\teyeTranslationR.fromArray(eyeParamsR.offset);\n\n\t\t\tif (Array.isArray(scene)) {\n\n\t\t\t\tconsole.warn('THREE.VREffect.render() no longer supports arrays. Use object.layers instead.');\n\t\t\t\tscene = scene[0];\n\t\t\t}\n\n\t\t\t// When rendering we don't care what the recommended size is, only what the actual size\n\t\t\t// of the backbuffer is.\n\t\t\tvar size = renderer.getSize();\n\t\t\tvar layers = vrDisplay.getLayers();\n\t\t\tvar leftBounds;\n\t\t\tvar rightBounds;\n\n\t\t\tif (layers.length) {\n\n\t\t\t\tvar layer = layers[0];\n\n\t\t\t\tleftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;\n\t\t\t\trightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;\n\t\t\t} else {\n\n\t\t\t\tleftBounds = defaultLeftBounds;\n\t\t\t\trightBounds = defaultRightBounds;\n\t\t\t}\n\n\t\t\trenderRectL = {\n\t\t\t\tx: Math.round(size.width * leftBounds[0]),\n\t\t\t\ty: Math.round(size.height * leftBounds[1]),\n\t\t\t\twidth: Math.round(size.width * leftBounds[2]),\n\t\t\t\theight: Math.round(size.height * leftBounds[3])\n\t\t\t};\n\t\t\trenderRectR = {\n\t\t\t\tx: Math.round(size.width * rightBounds[0]),\n\t\t\t\ty: Math.round(size.height * rightBounds[1]),\n\t\t\t\twidth: Math.round(size.width * rightBounds[2]),\n\t\t\t\theight: Math.round(size.height * rightBounds[3])\n\t\t\t};\n\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderer.setRenderTarget(renderTarget);\n\t\t\t\trenderTarget.scissorTest = true;\n\t\t\t} else {\n\n\t\t\t\trenderer.setRenderTarget(null);\n\t\t\t\trenderer.setScissorTest(true);\n\t\t\t}\n\n\t\t\tif (renderer.autoClear || forceClear) renderer.clear();\n\n\t\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\n\t\t\tcamera.matrixWorld.decompose(cameraL.position, cameraL.quaternion, cameraL.scale);\n\t\t\tcamera.matrixWorld.decompose(cameraR.position, cameraR.quaternion, cameraR.scale);\n\n\t\t\tvar scale = this.scale;\n\t\t\tcameraL.translateOnAxis(eyeTranslationL, scale);\n\t\t\tcameraR.translateOnAxis(eyeTranslationR, scale);\n\n\t\t\tif (vrDisplay.getFrameData) {\n\n\t\t\t\tvrDisplay.depthNear = camera.near;\n\t\t\t\tvrDisplay.depthFar = camera.far;\n\n\t\t\t\tvrDisplay.getFrameData(frameData);\n\n\t\t\t\tcameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;\n\t\t\t\tcameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;\n\t\t\t} else {\n\n\t\t\t\tcameraL.projectionMatrix = fovToProjection(eyeParamsL.fieldOfView, true, camera.near, camera.far);\n\t\t\t\tcameraR.projectionMatrix = fovToProjection(eyeParamsR.fieldOfView, true, camera.near, camera.far);\n\t\t\t}\n\n\t\t\t// render left eye\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t\trenderTarget.scissor.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t\trenderer.setScissor(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t}\n\t\t\trenderer.render(scene, cameraL, renderTarget, forceClear);\n\n\t\t\t// render right eye\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t\trenderTarget.scissor.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t\trenderer.setScissor(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t}\n\t\t\trenderer.render(scene, cameraR, renderTarget, forceClear);\n\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(0, 0, size.width, size.height);\n\t\t\t\trenderTarget.scissor.set(0, 0, size.width, size.height);\n\t\t\t\trenderTarget.scissorTest = false;\n\t\t\t\trenderer.setRenderTarget(null);\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport(0, 0, size.width, size.height);\n\t\t\t\trenderer.setScissorTest(false);\n\t\t\t}\n\n\t\t\tif (autoUpdate) {\n\n\t\t\t\tscene.autoUpdate = true;\n\t\t\t}\n\n\t\t\tif (scope.autoSubmitFrame) {\n\n\t\t\t\tscope.submitFrame();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Regular render mode if not HMD\n\n\t\trenderer.render(scene, camera, renderTarget, forceClear);\n\t};\n\n\tthis.dispose = function () {\n\n\t\twindow.removeEventListener('vrdisplaypresentchange', onVRDisplayPresentChange, false);\n\t};\n\n\t//\n\n\tfunction fovToNDCScaleOffset(fov) {\n\n\t\tvar pxscale = 2.0 / (fov.leftTan + fov.rightTan);\n\t\tvar pxoffset = (fov.leftTan - fov.rightTan) * pxscale * 0.5;\n\t\tvar pyscale = 2.0 / (fov.upTan + fov.downTan);\n\t\tvar pyoffset = (fov.upTan - fov.downTan) * pyscale * 0.5;\n\t\treturn { scale: [pxscale, pyscale], offset: [pxoffset, pyoffset] };\n\t}\n\n\tfunction fovPortToProjection(fov, rightHanded, zNear, zFar) {\n\n\t\trightHanded = rightHanded === undefined ? true : rightHanded;\n\t\tzNear = zNear === undefined ? 0.01 : zNear;\n\t\tzFar = zFar === undefined ? 10000.0 : zFar;\n\n\t\tvar handednessScale = rightHanded ? -1.0 : 1.0;\n\n\t\t// start with an identity matrix\n\t\tvar mobj = new THREE.Matrix4();\n\t\tvar m = mobj.elements;\n\n\t\t// and with scale/offset info for normalized device coords\n\t\tvar scaleAndOffset = fovToNDCScaleOffset(fov);\n\n\t\t// X result, map clip edges to [-w,+w]\n\t\tm[0 * 4 + 0] = scaleAndOffset.scale[0];\n\t\tm[0 * 4 + 1] = 0.0;\n\t\tm[0 * 4 + 2] = scaleAndOffset.offset[0] * handednessScale;\n\t\tm[0 * 4 + 3] = 0.0;\n\n\t\t// Y result, map clip edges to [-w,+w]\n\t\t// Y offset is negated because this proj matrix transforms from world coords with Y=up,\n\t\t// but the NDC scaling has Y=down (thanks D3D?)\n\t\tm[1 * 4 + 0] = 0.0;\n\t\tm[1 * 4 + 1] = scaleAndOffset.scale[1];\n\t\tm[1 * 4 + 2] = -scaleAndOffset.offset[1] * handednessScale;\n\t\tm[1 * 4 + 3] = 0.0;\n\n\t\t// Z result (up to the app)\n\t\tm[2 * 4 + 0] = 0.0;\n\t\tm[2 * 4 + 1] = 0.0;\n\t\tm[2 * 4 + 2] = zFar / (zNear - zFar) * -handednessScale;\n\t\tm[2 * 4 + 3] = zFar * zNear / (zNear - zFar);\n\n\t\t// W result (= Z in)\n\t\tm[3 * 4 + 0] = 0.0;\n\t\tm[3 * 4 + 1] = 0.0;\n\t\tm[3 * 4 + 2] = handednessScale;\n\t\tm[3 * 4 + 3] = 0.0;\n\n\t\tmobj.transpose();\n\n\t\treturn mobj;\n\t}\n\n\tfunction fovToProjection(fov, rightHanded, zNear, zFar) {\n\n\t\tvar DEG2RAD = Math.PI / 180.0;\n\n\t\tvar fovPort = {\n\t\t\tupTan: Math.tan(fov.upDegrees * DEG2RAD),\n\t\t\tdownTan: Math.tan(fov.downDegrees * DEG2RAD),\n\t\t\tleftTan: Math.tan(fov.leftDegrees * DEG2RAD),\n\t\t\trightTan: Math.tan(fov.rightDegrees * DEG2RAD)\n\t\t};\n\n\t\treturn fovPortToProjection(fovPort, rightHanded, zNear, zFar);\n\t}\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Based on @tojiro's vr-samples-utils.js\n */\n\nvar WEBVR = exports.WEBVR = {\n\n\tisAvailable: function isAvailable() {\n\n\t\tconsole.warn('WEBVR: isAvailable() is being deprecated. Use .checkAvailability() instead.');\n\t\treturn navigator.getVRDisplays !== undefined;\n\t},\n\n\tcheckAvailability: function checkAvailability() {\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (navigator.getVRDisplays !== undefined) {\n\n\t\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\n\t\t\t\t\tif (displays.length === 0) {\n\n\t\t\t\t\t\treject('WebVR supported, but no VRDisplays found.');\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\treject('Your browser does not support WebVR. See <a href=\"https://webvr.info\">webvr.info</a> for assistance.');\n\t\t\t}\n\t\t});\n\t},\n\n\tgetVRDisplay: function getVRDisplay(onDisplay) {\n\n\t\tif ('getVRDisplays' in navigator) {\n\n\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\t\t\t\tonDisplay(displays[0]);\n\t\t\t});\n\t\t}\n\t},\n\n\tgetMessage: function getMessage() {\n\n\t\tconsole.warn('WEBVR: getMessage() is being deprecated. Use .getMessageContainer( message ) instead.');\n\n\t\tvar message;\n\n\t\tif (navigator.getVRDisplays) {\n\n\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\n\t\t\t\tif (displays.length === 0) message = 'WebVR supported, but no VRDisplays found.';\n\t\t\t});\n\t\t} else {\n\n\t\t\tmessage = 'Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.';\n\t\t}\n\n\t\tif (message !== undefined) {\n\n\t\t\tvar container = document.createElement('div');\n\t\t\tcontainer.style.position = 'absolute';\n\t\t\tcontainer.style.left = '0';\n\t\t\tcontainer.style.top = '0';\n\t\t\tcontainer.style.right = '0';\n\t\t\tcontainer.style.zIndex = '999';\n\t\t\tcontainer.align = 'center';\n\n\t\t\tvar error = document.createElement('div');\n\t\t\terror.style.fontFamily = 'sans-serif';\n\t\t\terror.style.fontSize = '16px';\n\t\t\terror.style.fontStyle = 'normal';\n\t\t\terror.style.lineHeight = '26px';\n\t\t\terror.style.backgroundColor = '#fff';\n\t\t\terror.style.color = '#000';\n\t\t\terror.style.padding = '10px 20px';\n\t\t\terror.style.margin = '50px';\n\t\t\terror.style.display = 'inline-block';\n\t\t\terror.innerHTML = message;\n\t\t\tcontainer.appendChild(error);\n\n\t\t\treturn container;\n\t\t}\n\t},\n\n\tgetMessageContainer: function getMessageContainer(message) {\n\n\t\tvar container = document.createElement('div');\n\t\tcontainer.style.position = 'absolute';\n\t\tcontainer.style.left = '0';\n\t\tcontainer.style.top = '0';\n\t\tcontainer.style.right = '0';\n\t\tcontainer.style.zIndex = '999';\n\t\tcontainer.align = 'center';\n\n\t\tvar error = document.createElement('div');\n\t\terror.style.fontFamily = 'sans-serif';\n\t\terror.style.fontSize = '16px';\n\t\terror.style.fontStyle = 'normal';\n\t\terror.style.lineHeight = '26px';\n\t\terror.style.backgroundColor = '#fff';\n\t\terror.style.color = '#000';\n\t\terror.style.padding = '10px 20px';\n\t\terror.style.margin = '50px';\n\t\terror.style.display = 'inline-block';\n\t\terror.innerHTML = message;\n\t\tcontainer.appendChild(error);\n\n\t\treturn container;\n\t},\n\n\tgetButton: function getButton(display, canvas) {\n\n\t\tif ('VREffect' in THREE && display instanceof THREE.VREffect) {\n\n\t\t\tconsole.error('WebVR.getButton() now expects a VRDisplay.');\n\t\t\treturn document.createElement('button');\n\t\t}\n\n\t\tvar button = document.createElement('button');\n\t\tbutton.style.position = 'absolute';\n\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\tbutton.style.bottom = '20px';\n\t\tbutton.style.width = '100px';\n\t\tbutton.style.border = '0';\n\t\tbutton.style.padding = '8px';\n\t\tbutton.style.cursor = 'pointer';\n\t\tbutton.style.backgroundColor = '#000';\n\t\tbutton.style.color = '#fff';\n\t\tbutton.style.fontFamily = 'sans-serif';\n\t\tbutton.style.fontSize = '13px';\n\t\tbutton.style.fontStyle = 'normal';\n\t\tbutton.style.textAlign = 'center';\n\t\tbutton.style.zIndex = '999';\n\n\t\tif (display) {\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tdisplay.isPresenting ? display.exitPresent() : display.requestPresent([{ source: canvas }]);\n\t\t\t};\n\n\t\t\twindow.addEventListener('vrdisplaypresentchange', function () {\n\n\t\t\t\tbutton.textContent = display.isPresenting ? 'EXIT VR' : 'ENTER VR';\n\t\t\t}, false);\n\t\t} else {\n\n\t\t\tbutton.textContent = 'NO VR DISPLAY';\n\t\t}\n\n\t\treturn button;\n\t}\n\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VRControls = exports.VRModule = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _whs = __webpack_require__(3);\n\nvar _VREffect = __webpack_require__(1);\n\nvar _threeVrcontrolsModule = __webpack_require__(0);\n\nvar _threeVrcontrolsModule2 = _interopRequireDefault(_threeVrcontrolsModule);\n\nvar _WebVR = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar VRModule = function () {\n  function VRModule() {\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, VRModule);\n\n    this.params = Object.assign(params, {\n      message: true,\n      button: true\n    });\n\n    this.scene = null;\n    this.camera = null;\n    this.effect = null;\n  }\n\n  _createClass(VRModule, [{\n    key: 'manager',\n    value: function manager(_manager) {\n      var _this = this;\n\n      _manager.define('vr');\n\n      var rendering = _manager.use('rendering');\n      var renderer = _manager.get('renderer');\n\n      var resize = _manager.use('resize');\n\n      this.effect = new _VREffect.VREffect(renderer);\n\n      this.scene = _manager.get('scene');\n      this.camera = _manager.get('camera');\n\n      rendering.effect(this.effect);\n\n      // TODO: Fix resize.\n\n      resize.addCallback(function (width, height) {\n        _this.effect.setSize(+width, +height);\n      });\n\n      // WEBVR\n      var _params = this.params,\n          message = _params.message,\n          button = _params.button;\n\n\n      if (message) _WebVR.WEBVR.checkAvailability().catch(function (message) {\n        document.body.appendChild(_WebVR.WEBVR.getMessageContainer(message));\n      });\n\n      if (button) _WebVR.WEBVR.getVRDisplay(function (display) {\n        document.body.appendChild(_WebVR.WEBVR.getButton(display, renderer.domElement));\n      });\n    }\n  }]);\n\n  return VRModule;\n}();\n\nexports.VRModule = VRModule;\n\nvar VRControls = exports.VRControls = function (_ControlsModule) {\n  _inherits(VRControls, _ControlsModule);\n\n  function VRControls(_ref) {\n    var object = _ref.object,\n        onError = _ref.onError,\n        intensity = _ref.intensity;\n\n    _classCallCheck(this, VRControls);\n\n    var controls = new _threeVrcontrolsModule2.default(object.native, onError);\n\n    controls.standing = true;\n    controls.scale = intensity;\n\n    return _possibleConstructorReturn(this, (VRControls.__proto__ || Object.getPrototypeOf(VRControls)).call(this, { controls: controls }));\n  }\n\n  return VRControls;\n}(_whs.ControlsModule);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// VRKit.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b6d5373c3295711e533d","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _three = require('three');\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n* @author dmarcos / https://github.com/dmarcos\n* @author mrdoob / http://mrdoob.com\n* @author halvves / https://github.com/halvves (i only es6 moduled it)\n*/\n\nvar VRControls = function () {\n  function VRControls(camera, onError) {\n    var _this = this;\n\n    _classCallCheck(this, VRControls);\n\n    this.camera = camera;\n    this.vrDisplay;\n    this.vrDisplays;\n    this.standingMatrix = new _three.Matrix4();\n    this.frameData = null;\n\n    if ('VRFrameData' in window) {\n      this.frameData = new VRFrameData();\n    }\n\n    if (navigator.getVRDisplays) {\n      navigator.getVRDisplays().then(function (displays) {\n        _this.vrDisplays = displays;\n        if (displays.length > 0) {\n          _this.vrDisplay = displays[0];\n        } else {\n          if (onError) onError('VR input not available.');\n        }\n      }).catch(function () {\n        console.warn('VRControls: Unable to get VR Displays');\n      });\n    }\n\n    // the Rift SDK returns the position in meters\n    // this scale factor allows the user to define how meters\n    // are converted to scene units.\n    this.scale = 1;\n\n    // If true will use \"standing space\" coordinate system where y=0 is the\n    // floor and x=0, z=0 is the center of the room.\n    this.standing = false;\n\n    // Distance from the users eyes to the floor in meters. Used when\n    // standing=true but the VRDisplay doesn't provide stageParameters.\n    this.userHeight = 1.6;\n  }\n\n  _createClass(VRControls, [{\n    key: 'getVRDisplay',\n    value: function getVRDisplay() {\n      return this.vrDisplay;\n    }\n  }, {\n    key: 'setVRDisplay',\n    value: function setVRDisplay(value) {\n      this.vrDisplay = value;\n    }\n  }, {\n    key: 'getVRDisplays',\n    value: function getVRDisplays() {\n      console.warn('VRControls: getVRDisplays() is being deprecated.');\n      return this.vrDisplays;\n    }\n  }, {\n    key: 'getStandingMatrix',\n    value: function getStandingMatrix() {\n      return this.standingMatrix;\n    }\n  }, {\n    key: 'update',\n    value: function update() {\n      var camera = this.camera;\n\n      if (this.vrDisplay) {\n        var pose = void 0;\n        if (this.vrDisplay.getFrameData) {\n          this.vrDisplay.getFrameData(this.frameData);\n          pose = this.frameData.pose;\n        } else if (this.vrDisplay.getPose) {\n          pose = this.vrDisplay.getPose();\n        }\n        if (pose.orientation !== null) {\n          camera.quaternion.fromArray(pose.orientation);\n        }\n        if (pose.position !== null) {\n          camera.position.fromArray(pose.position);\n        } else {\n          camera.position.set(0, 0, 0);\n        }\n        if (this.standing) {\n          if (this.vrDisplay.stageParameters) {\n            camera.updateMatrix();\n            this.standingMatrix.fromArray(this.vrDisplay.stageParameters.sittingToStandingTransform);\n            camera.applyMatrix(this.standingMatrix);\n          } else {\n            camera.position.setY(camera.position.y + this.userHeight);\n          }\n        }\n        camera.position.multiplyScalar(this.scale);\n      }\n    }\n  }, {\n    key: 'dispose',\n    value: function dispose() {\n      this.vrDisplay = null;\n    }\n  }]);\n\n  return VRControls;\n}();\n\nexports.default = VRControls;\n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/three-vrcontrols-module/dist/vr-controls.js\n// module id = 0\n// module chunks = 0","/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n *\n * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html\n *\n * Firefox: http://mozvr.com/downloads/\n * Chromium: https://webvr.info/get-chrome\n *\n */\n\nexport const VREffect = function ( renderer, onError ) {\n\n\tvar vrDisplay, vrDisplays;\n\tvar eyeTranslationL = new THREE.Vector3();\n\tvar eyeTranslationR = new THREE.Vector3();\n\tvar renderRectL, renderRectR;\n\n\tvar frameData = null;\n\n\tif ( 'VRFrameData' in window ) {\n\n\t\tframeData = new VRFrameData();\n\n\t}\n\n\tfunction gotVRDisplays( displays ) {\n\n\t\tvrDisplays = displays;\n\n\t\tif ( displays.length > 0 ) {\n\n\t\t\tvrDisplay = displays[ 0 ];\n\n\t\t} else {\n\n\t\t\tif ( onError ) onError( 'HMD not available' );\n\n\t\t}\n\n\t}\n\n\tif ( navigator.getVRDisplays ) {\n\n\t\tnavigator.getVRDisplays().then( gotVRDisplays ).catch ( function () {\n\n\t\t\tconsole.warn( 'THREE.VREffect: Unable to get VR Displays' );\n\n\t\t} );\n\n\t}\n\n\t//\n\n\tthis.isPresenting = false;\n\tthis.scale = 1;\n\n\tvar scope = this;\n\n\tvar rendererSize = renderer.getSize();\n\tvar rendererUpdateStyle = false;\n\tvar rendererPixelRatio = renderer.getPixelRatio();\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\n\t};\n\n\tthis.setVRDisplay = function ( value ) {\n\n\t\tvrDisplay = value;\n\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\tconsole.warn( 'THREE.VREffect: getVRDisplays() is being deprecated.' );\n\t\treturn vrDisplays;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\trendererSize = { width: width, height: height };\n\t\trendererUpdateStyle = updateStyle;\n\n\t\tif ( scope.isPresenting ) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\trenderer.setPixelRatio( 1 );\n\t\t\trenderer.setSize( eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false );\n\n\t\t} else {\n\n\t\t\trenderer.setPixelRatio( rendererPixelRatio );\n\t\t\trenderer.setSize( width, height, updateStyle );\n\n\t\t}\n\n\t};\n\n\t// fullscreen\n\n\tvar canvas = renderer.domElement;\n\tvar requestFullscreen;\n\tvar exitFullscreen;\n\tvar fullscreenElement;\n\tvar defaultLeftBounds = [ 0.0, 0.0, 0.5, 1.0 ];\n\tvar defaultRightBounds = [ 0.5, 0.0, 0.5, 1.0 ];\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tvar wasPresenting = scope.isPresenting;\n\t\tscope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;\n\n\t\tif ( scope.isPresenting ) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\tvar eyeWidth = eyeParamsL.renderWidth;\n\t\t\tvar eyeHeight = eyeParamsL.renderHeight;\n\n\t\t\tif ( !wasPresenting ) {\n\n\t\t\t\trendererPixelRatio = renderer.getPixelRatio();\n\t\t\t\trendererSize = renderer.getSize();\n\n\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\trenderer.setSize( eyeWidth * 2, eyeHeight, false );\n\n\t\t\t}\n\n\t\t} else if ( wasPresenting ) {\n\n\t\t\trenderer.setPixelRatio( rendererPixelRatio );\n\t\t\trenderer.setSize( rendererSize.width, rendererSize.height, rendererUpdateStyle );\n\n\t\t}\n\n\t}\n\n\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\tthis.setFullScreen = function ( boolean ) {\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tif ( vrDisplay === undefined ) {\n\n\t\t\t\treject( new Error( 'No VR hardware found.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( scope.isPresenting === boolean ) {\n\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( boolean ) {\n\n\t\t\t\tresolve( vrDisplay.requestPresent( [ { source: canvas } ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tresolve( vrDisplay.exitPresent() );\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tthis.requestPresent = function () {\n\n\t\treturn this.setFullScreen( true );\n\n\t};\n\n\tthis.exitPresent = function () {\n\n\t\treturn this.setFullScreen( false );\n\n\t};\n\n\tthis.requestAnimationFrame = function ( f ) {\n\n\t\tif ( vrDisplay !== undefined ) {\n\n\t\t\treturn vrDisplay.requestAnimationFrame( f );\n\n\t\t} else {\n\n\t\t\treturn window.requestAnimationFrame( f );\n\n\t\t}\n\n\t};\n\n\tthis.cancelAnimationFrame = function ( h ) {\n\n\t\tif ( vrDisplay !== undefined ) {\n\n\t\t\tvrDisplay.cancelAnimationFrame( h );\n\n\t\t} else {\n\n\t\t\twindow.cancelAnimationFrame( h );\n\n\t\t}\n\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif ( vrDisplay !== undefined && scope.isPresenting ) {\n\n\t\t\tvrDisplay.submitFrame();\n\n\t\t}\n\n\t};\n\n\tthis.autoSubmitFrame = true;\n\n\t// render\n\n\tvar cameraL = new THREE.PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new THREE.PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( vrDisplay && scope.isPresenting ) {\n\n\t\t\tvar autoUpdate = scene.autoUpdate;\n\n\t\t\tif ( autoUpdate ) {\n\n\t\t\t\tscene.updateMatrixWorld();\n\t\t\t\tscene.autoUpdate = false;\n\n\t\t\t}\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\tvar eyeParamsR = vrDisplay.getEyeParameters( 'right' );\n\n\t\t\teyeTranslationL.fromArray( eyeParamsL.offset );\n\t\t\teyeTranslationR.fromArray( eyeParamsR.offset );\n\n\t\t\tif ( Array.isArray( scene ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.VREffect.render() no longer supports arrays. Use object.layers instead.' );\n\t\t\t\tscene = scene[ 0 ];\n\n\t\t\t}\n\n\t\t\t// When rendering we don't care what the recommended size is, only what the actual size\n\t\t\t// of the backbuffer is.\n\t\t\tvar size = renderer.getSize();\n\t\t\tvar layers = vrDisplay.getLayers();\n\t\t\tvar leftBounds;\n\t\t\tvar rightBounds;\n\n\t\t\tif ( layers.length ) {\n\n\t\t\t\tvar layer = layers[ 0 ];\n\n\t\t\t\tleftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;\n\t\t\t\trightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;\n\n\t\t\t} else {\n\n\t\t\t\tleftBounds = defaultLeftBounds;\n\t\t\t\trightBounds = defaultRightBounds;\n\n\t\t\t}\n\n\t\t\trenderRectL = {\n\t\t\t\tx: Math.round( size.width * leftBounds[ 0 ] ),\n\t\t\t\ty: Math.round( size.height * leftBounds[ 1 ] ),\n\t\t\t\twidth: Math.round( size.width * leftBounds[ 2 ] ),\n\t\t\t\theight: Math.round(size.height * leftBounds[ 3 ] )\n\t\t\t};\n\t\t\trenderRectR = {\n\t\t\t\tx: Math.round( size.width * rightBounds[ 0 ] ),\n\t\t\t\ty: Math.round( size.height * rightBounds[ 1 ] ),\n\t\t\t\twidth: Math.round( size.width * rightBounds[ 2 ] ),\n\t\t\t\theight: Math.round(size.height * rightBounds[ 3 ] )\n\t\t\t};\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderer.setRenderTarget( renderTarget );\n\t\t\t\trenderTarget.scissorTest = true;\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setRenderTarget( null );\n\t\t\t\trenderer.setScissorTest( true );\n\n\t\t\t}\n\n\t\t\tif ( renderer.autoClear || forceClear ) renderer.clear();\n\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tcamera.matrixWorld.decompose( cameraL.position, cameraL.quaternion, cameraL.scale );\n\t\t\tcamera.matrixWorld.decompose( cameraR.position, cameraR.quaternion, cameraR.scale );\n\n\t\t\tvar scale = this.scale;\n\t\t\tcameraL.translateOnAxis( eyeTranslationL, scale );\n\t\t\tcameraR.translateOnAxis( eyeTranslationR, scale );\n\n\t\t\tif ( vrDisplay.getFrameData ) {\n\n\t\t\t\tvrDisplay.depthNear = camera.near;\n\t\t\t\tvrDisplay.depthFar = camera.far;\n\n\t\t\t\tvrDisplay.getFrameData( frameData );\n\n\t\t\t\tcameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;\n\t\t\t\tcameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;\n\n\t\t\t} else {\n\n\t\t\t\tcameraL.projectionMatrix = fovToProjection( eyeParamsL.fieldOfView, true, camera.near, camera.far );\n\t\t\t\tcameraR.projectionMatrix = fovToProjection( eyeParamsR.fieldOfView, true, camera.near, camera.far );\n\n\t\t\t}\n\n\t\t\t// render left eye\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\t\t\t\trenderTarget.scissor.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\t\t\t\trenderer.setScissor( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\n\t\t\t}\n\t\t\trenderer.render( scene, cameraL, renderTarget, forceClear );\n\n\t\t\t// render right eye\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\t\t\t\trenderTarget.scissor.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\t\t\t\trenderer.setScissor( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\n\t\t\t}\n\t\t\trenderer.render( scene, cameraR, renderTarget, forceClear );\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set( 0, 0, size.width, size.height );\n\t\t\t\trenderTarget.scissor.set( 0, 0, size.width, size.height );\n\t\t\t\trenderTarget.scissorTest = false;\n\t\t\t\trenderer.setRenderTarget( null );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( 0, 0, size.width, size.height );\n\t\t\t\trenderer.setScissorTest( false );\n\n\t\t\t}\n\n\t\t\tif ( autoUpdate ) {\n\n\t\t\t\tscene.autoUpdate = true;\n\n\t\t\t}\n\n\t\t\tif ( scope.autoSubmitFrame ) {\n\n\t\t\t\tscope.submitFrame();\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Regular render mode if not HMD\n\n\t\trenderer.render( scene, camera, renderTarget, forceClear );\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t};\n\n\t//\n\n\tfunction fovToNDCScaleOffset( fov ) {\n\n\t\tvar pxscale = 2.0 / ( fov.leftTan + fov.rightTan );\n\t\tvar pxoffset = ( fov.leftTan - fov.rightTan ) * pxscale * 0.5;\n\t\tvar pyscale = 2.0 / ( fov.upTan + fov.downTan );\n\t\tvar pyoffset = ( fov.upTan - fov.downTan ) * pyscale * 0.5;\n\t\treturn { scale: [ pxscale, pyscale ], offset: [ pxoffset, pyoffset ] };\n\n\t}\n\n\tfunction fovPortToProjection( fov, rightHanded, zNear, zFar ) {\n\n\t\trightHanded = rightHanded === undefined ? true : rightHanded;\n\t\tzNear = zNear === undefined ? 0.01 : zNear;\n\t\tzFar = zFar === undefined ? 10000.0 : zFar;\n\n\t\tvar handednessScale = rightHanded ? - 1.0 : 1.0;\n\n\t\t// start with an identity matrix\n\t\tvar mobj = new THREE.Matrix4();\n\t\tvar m = mobj.elements;\n\n\t\t// and with scale/offset info for normalized device coords\n\t\tvar scaleAndOffset = fovToNDCScaleOffset( fov );\n\n\t\t// X result, map clip edges to [-w,+w]\n\t\tm[ 0 * 4 + 0 ] = scaleAndOffset.scale[ 0 ];\n\t\tm[ 0 * 4 + 1 ] = 0.0;\n\t\tm[ 0 * 4 + 2 ] = scaleAndOffset.offset[ 0 ] * handednessScale;\n\t\tm[ 0 * 4 + 3 ] = 0.0;\n\n\t\t// Y result, map clip edges to [-w,+w]\n\t\t// Y offset is negated because this proj matrix transforms from world coords with Y=up,\n\t\t// but the NDC scaling has Y=down (thanks D3D?)\n\t\tm[ 1 * 4 + 0 ] = 0.0;\n\t\tm[ 1 * 4 + 1 ] = scaleAndOffset.scale[ 1 ];\n\t\tm[ 1 * 4 + 2 ] = - scaleAndOffset.offset[ 1 ] * handednessScale;\n\t\tm[ 1 * 4 + 3 ] = 0.0;\n\n\t\t// Z result (up to the app)\n\t\tm[ 2 * 4 + 0 ] = 0.0;\n\t\tm[ 2 * 4 + 1 ] = 0.0;\n\t\tm[ 2 * 4 + 2 ] = zFar / ( zNear - zFar ) * - handednessScale;\n\t\tm[ 2 * 4 + 3 ] = ( zFar * zNear ) / ( zNear - zFar );\n\n\t\t// W result (= Z in)\n\t\tm[ 3 * 4 + 0 ] = 0.0;\n\t\tm[ 3 * 4 + 1 ] = 0.0;\n\t\tm[ 3 * 4 + 2 ] = handednessScale;\n\t\tm[ 3 * 4 + 3 ] = 0.0;\n\n\t\tmobj.transpose();\n\n\t\treturn mobj;\n\n\t}\n\n\tfunction fovToProjection( fov, rightHanded, zNear, zFar ) {\n\n\t\tvar DEG2RAD = Math.PI / 180.0;\n\n\t\tvar fovPort = {\n\t\t\tupTan: Math.tan( fov.upDegrees * DEG2RAD ),\n\t\t\tdownTan: Math.tan( fov.downDegrees * DEG2RAD ),\n\t\t\tleftTan: Math.tan( fov.leftDegrees * DEG2RAD ),\n\t\t\trightTan: Math.tan( fov.rightDegrees * DEG2RAD )\n\t\t};\n\n\t\treturn fovPortToProjection( fovPort, rightHanded, zNear, zFar );\n\n\t}\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/VREffect.js","/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Based on @tojiro's vr-samples-utils.js\n */\n\nexport const WEBVR = {\n\n\tisAvailable: function () {\n\n\t\tconsole.warn( 'WEBVR: isAvailable() is being deprecated. Use .checkAvailability() instead.' );\n\t\treturn navigator.getVRDisplays !== undefined;\n\n\t},\n\n\tcheckAvailability: function () {\n\n\t\treturn new Promise( function( resolve, reject ) {\n\n\t\t\tif ( navigator.getVRDisplays !== undefined ) {\n\n\t\t\t\tnavigator.getVRDisplays().then( function ( displays ) {\n\n\t\t\t\t\tif ( displays.length === 0 ) {\n\n\t\t\t\t\t\treject( 'WebVR supported, but no VRDisplays found.' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\treject( 'Your browser does not support WebVR. See <a href=\"https://webvr.info\">webvr.info</a> for assistance.' );\n\n\t\t\t}\n\n\t\t} );\n\n\t},\n\n\tgetVRDisplay: function ( onDisplay ) {\n\n\t\tif ( 'getVRDisplays' in navigator ) {\n\n\t\t\tnavigator.getVRDisplays()\n\t\t\t\t.then( function ( displays ) {\n\t\t\t\t\tonDisplay( displays[ 0 ] );\n\t\t\t\t} );\n\n\t\t}\n\n\t},\n\n\tgetMessage: function () {\n\n\t\tconsole.warn( 'WEBVR: getMessage() is being deprecated. Use .getMessageContainer( message ) instead.' );\n\n\t\tvar message;\n\n\t\tif ( navigator.getVRDisplays ) {\n\n\t\t\tnavigator.getVRDisplays().then( function ( displays ) {\n\n\t\t\t\tif ( displays.length === 0 ) message = 'WebVR supported, but no VRDisplays found.';\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\tmessage = 'Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.';\n\n\t\t}\n\n\t\tif ( message !== undefined ) {\n\n\t\t\tvar container = document.createElement( 'div' );\n\t\t\tcontainer.style.position = 'absolute';\n\t\t\tcontainer.style.left = '0';\n\t\t\tcontainer.style.top = '0';\n\t\t\tcontainer.style.right = '0';\n\t\t\tcontainer.style.zIndex = '999';\n\t\t\tcontainer.align = 'center';\n\n\t\t\tvar error = document.createElement( 'div' );\n\t\t\terror.style.fontFamily = 'sans-serif';\n\t\t\terror.style.fontSize = '16px';\n\t\t\terror.style.fontStyle = 'normal';\n\t\t\terror.style.lineHeight = '26px';\n\t\t\terror.style.backgroundColor = '#fff';\n\t\t\terror.style.color = '#000';\n\t\t\terror.style.padding = '10px 20px';\n\t\t\terror.style.margin = '50px';\n\t\t\terror.style.display = 'inline-block';\n\t\t\terror.innerHTML = message;\n\t\t\tcontainer.appendChild( error );\n\n\t\t\treturn container;\n\n\t\t}\n\n\t},\n\n\tgetMessageContainer: function ( message ) {\n\n\t\tvar container = document.createElement( 'div' );\n\t\tcontainer.style.position = 'absolute';\n\t\tcontainer.style.left = '0';\n\t\tcontainer.style.top = '0';\n\t\tcontainer.style.right = '0';\n\t\tcontainer.style.zIndex = '999';\n\t\tcontainer.align = 'center';\n\n\t\tvar error = document.createElement( 'div' );\n\t\terror.style.fontFamily = 'sans-serif';\n\t\terror.style.fontSize = '16px';\n\t\terror.style.fontStyle = 'normal';\n\t\terror.style.lineHeight = '26px';\n\t\terror.style.backgroundColor = '#fff';\n\t\terror.style.color = '#000';\n\t\terror.style.padding = '10px 20px';\n\t\terror.style.margin = '50px';\n\t\terror.style.display = 'inline-block';\n\t\terror.innerHTML = message;\n\t\tcontainer.appendChild( error );\n\n\t\treturn container;\n\n\t},\n\n\tgetButton: function ( display, canvas ) {\n\n\t\tif ( 'VREffect' in THREE && display instanceof THREE.VREffect ) {\n\n\t\t\tconsole.error( 'WebVR.getButton() now expects a VRDisplay.' );\n\t\t\treturn document.createElement( 'button' );\n\n\t\t}\n\n\t\tvar button = document.createElement( 'button' );\n\t\tbutton.style.position = 'absolute';\n\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\tbutton.style.bottom = '20px';\n\t\tbutton.style.width = '100px';\n\t\tbutton.style.border = '0';\n\t\tbutton.style.padding = '8px';\n\t\tbutton.style.cursor = 'pointer';\n\t\tbutton.style.backgroundColor = '#000';\n\t\tbutton.style.color = '#fff';\n\t\tbutton.style.fontFamily = 'sans-serif';\n\t\tbutton.style.fontSize = '13px';\n\t\tbutton.style.fontStyle = 'normal';\n\t\tbutton.style.textAlign = 'center';\n\t\tbutton.style.zIndex = '999';\n\n\t\tif ( display ) {\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tdisplay.isPresenting ? display.exitPresent() : display.requestPresent( [ { source: canvas } ] );\n\n\t\t\t};\n\n\t\t\twindow.addEventListener( 'vrdisplaypresentchange', function () {\n\n\t\t\t\tbutton.textContent = display.isPresenting ? 'EXIT VR' : 'ENTER VR';\n\n\t\t\t}, false );\n\n\t\t} else {\n\n\t\t\tbutton.textContent = 'NO VR DISPLAY';\n\n\t\t}\n\n\t\treturn button;\n\n\t}\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/WebVR.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"whs\",\"commonjs2\":\"whs\",\"amd\":\"whs\",\"root\":\"WHS\"}\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"three\",\"commonjs2\":\"three\",\"amd\":\"three\",\"root\":\"THREE\"}\n// module id = 4\n// module chunks = 0","import {Loop, ControlsModule} from 'whs';\n\nimport {VREffect} from './lib/VREffect';\nimport VRControlsNative from 'three-vrcontrols-module';\nimport {WEBVR} from './lib/WebVR';\n\nexport class VRModule {\n  constructor(params = {}) {\n    this.params = Object.assign(params, {\n      message: true,\n      button: true\n    });\n\n    this.scene = null;\n    this.camera = null;\n    this.effect = null;\n  }\n\n  manager(manager) {\n    manager.define('vr');\n\n    const rendering = manager.use('rendering');\n    const renderer = manager.get('renderer');\n\n    const resize = manager.use('resize');\n\n    this.effect = new VREffect(renderer);\n\n    this.scene = manager.get('scene');\n    this.camera = manager.get('camera');\n\n    rendering.effect(this.effect);\n\n    // TODO: Fix resize.\n\n    resize.addCallback((width, height) => {\n      this.effect.setSize(+width, +height);\n    });\n\n    // WEBVR\n    const {message, button} = this.params;\n\n    if (message) WEBVR.checkAvailability().catch(message => {\n\t\t\tdocument.body.appendChild(WEBVR.getMessageContainer(message));\n\t\t});\n\n    if (button) WEBVR.getVRDisplay(display => {\n      document.body.appendChild(WEBVR.getButton(display, renderer.domElement));\n    });\n  }\n}\n\nexport class VRControls extends ControlsModule {\n  constructor({object, onError, intensity}) {\n    const controls = new VRControlsNative(object.native, onError);\n\n    controls.standing = true;\n    controls.scale = intensity;\n\n    super({controls});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}