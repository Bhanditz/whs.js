{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///VRKit.js","webpack:///webpack/bootstrap d0409895bef851d75762","webpack:///./src/lib/VRControls.js","webpack:///./src/lib/VREffect.js","webpack:///./src/lib/WebVR.js","webpack:///external {\"commonjs\":\"whs\",\"commonjs2\":\"whs\",\"amd\":\"whs\",\"root\":\"WHS\"}","webpack:///./src/index.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","VRControls","onError","gotVRDisplays","displays","vrDisplays","length","vrDisplay","scope","standingMatrix","THREE","Matrix4","frameData","window","VRFrameData","navigator","getVRDisplays","then","catch","console","warn","scale","standing","userHeight","getVRDisplay","setVRDisplay","getStandingMatrix","update","pose","getFrameData","getPose","orientation","quaternion","fromArray","position","set","stageParameters","updateMatrix","sittingToStandingTransform","applyMatrix","setY","y","multiplyScalar","dispose","VREffect","renderer","onVRDisplayPresentChange","wasPresenting","isPresenting","undefined","eyeParamsL","getEyeParameters","eyeWidth","renderWidth","eyeHeight","renderHeight","rendererPixelRatio","getPixelRatio","rendererSize","getSize","setPixelRatio","setSize","width","height","rendererUpdateStyle","fovToNDCScaleOffset","fov","pxscale","leftTan","rightTan","pxoffset","pyscale","upTan","downTan","offset","fovPortToProjection","rightHanded","zNear","zFar","handednessScale","mobj","elements","scaleAndOffset","transpose","fovToProjection","DEG2RAD","Math","PI","tan","upDegrees","downDegrees","leftDegrees","rightDegrees","renderRectL","renderRectR","eyeTranslationL","Vector3","eyeTranslationR","updateStyle","canvas","domElement","defaultLeftBounds","defaultRightBounds","addEventListener","setFullScreen","boolean","Promise","resolve","reject","Error","requestPresent","source","exitPresent","requestAnimationFrame","f","cancelAnimationFrame","h","submitFrame","autoSubmitFrame","cameraL","PerspectiveCamera","layers","enable","cameraR","render","scene","camera","renderTarget","forceClear","autoUpdate","updateMatrixWorld","eyeParamsR","Array","isArray","leftBounds","rightBounds","size","getLayers","layer","x","round","setRenderTarget","scissorTest","setScissorTest","autoClear","clear","parent","matrixWorld","decompose","translateOnAxis","depthNear","near","depthFar","far","projectionMatrix","leftProjectionMatrix","rightProjectionMatrix","fieldOfView","viewport","scissor","setViewport","setScissor","removeEventListener","WEBVR","isAvailable","checkAvailability","onDisplay","getMessage","message","container","document","createElement","style","left","top","right","zIndex","align","error","fontFamily","fontSize","fontStyle","lineHeight","backgroundColor","color","padding","margin","display","innerHTML","appendChild","getMessageContainer","getButton","button","bottom","border","cursor","textAlign","textContent","onclick","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","TypeError","create","constructor","writable","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","VRModule","_createClass","defineProperties","target","props","descriptor","key","protoProps","staticProps","_whs","_VREffect","_VRControls","_WebVR","params","arguments","assign","effect","manager","_this","rendering","use","resize","addCallback","_params","body","_ControlsModule","_ref","intensity","controls","native","getPrototypeOf","ControlsModule"],"mappings":"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","file":"VRKit.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"whs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"whs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VRKit\"] = factory(require(\"whs\"));\n\telse\n\t\troot[\"VRKit\"] = factory(root[\"WHS\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"whs\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"whs\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"VRKit\"] = factory(require(\"whs\"));\n\telse\n\t\troot[\"VRKit\"] = factory(root[\"WHS\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 4);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n */\n\nvar VRControls = exports.VRControls = function VRControls(object, onError) {\n\n\tvar scope = this;\n\n\tvar vrDisplay, vrDisplays;\n\n\tvar standingMatrix = new THREE.Matrix4();\n\n\tvar frameData = null;\n\n\tif ('VRFrameData' in window) {\n\n\t\tframeData = new VRFrameData();\n\t}\n\n\tfunction gotVRDisplays(displays) {\n\n\t\tvrDisplays = displays;\n\n\t\tif (displays.length > 0) {\n\n\t\t\tvrDisplay = displays[0];\n\t\t} else {\n\n\t\t\tif (onError) onError('VR input not available.');\n\t\t}\n\t}\n\n\tif (navigator.getVRDisplays) {\n\n\t\tnavigator.getVRDisplays().then(gotVRDisplays).catch(function () {\n\n\t\t\tconsole.warn('THREE.VRControls: Unable to get VR Displays');\n\t\t});\n\t}\n\n\t// the Rift SDK returns the position in meters\n\t// this scale factor allows the user to define how meters\n\t// are converted to scene units.\n\n\tthis.scale = 1;\n\n\t// If true will use \"standing space\" coordinate system where y=0 is the\n\t// floor and x=0, z=0 is the center of the room.\n\tthis.standing = false;\n\n\t// Distance from the users eyes to the floor in meters. Used when\n\t// standing=true but the VRDisplay doesn't provide stageParameters.\n\tthis.userHeight = 1.6;\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\t};\n\n\tthis.setVRDisplay = function (value) {\n\n\t\tvrDisplay = value;\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\tconsole.warn('THREE.VRControls: getVRDisplays() is being deprecated.');\n\t\treturn vrDisplays;\n\t};\n\n\tthis.getStandingMatrix = function () {\n\n\t\treturn standingMatrix;\n\t};\n\n\tthis.update = function () {\n\n\t\tif (vrDisplay) {\n\n\t\t\tvar pose;\n\n\t\t\tif (vrDisplay.getFrameData) {\n\n\t\t\t\tvrDisplay.getFrameData(frameData);\n\t\t\t\tpose = frameData.pose;\n\t\t\t} else if (vrDisplay.getPose) {\n\n\t\t\t\tpose = vrDisplay.getPose();\n\t\t\t}\n\n\t\t\tif (pose.orientation !== null) {\n\n\t\t\t\tobject.quaternion.fromArray(pose.orientation);\n\t\t\t}\n\n\t\t\tif (pose.position !== null) {\n\n\t\t\t\tobject.position.fromArray(pose.position);\n\t\t\t} else {\n\n\t\t\t\tobject.position.set(0, 0, 0);\n\t\t\t}\n\n\t\t\tif (this.standing) {\n\n\t\t\t\tif (vrDisplay.stageParameters) {\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t\tstandingMatrix.fromArray(vrDisplay.stageParameters.sittingToStandingTransform);\n\t\t\t\t\tobject.applyMatrix(standingMatrix);\n\t\t\t\t} else {\n\n\t\t\t\t\tobject.position.setY(object.position.y + this.userHeight);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tobject.position.multiplyScalar(scope.scale);\n\t\t}\n\t};\n\n\tthis.dispose = function () {\n\n\t\tvrDisplay = null;\n\t};\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n *\n * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html\n *\n * Firefox: http://mozvr.com/downloads/\n * Chromium: https://webvr.info/get-chrome\n *\n */\n\nvar VREffect = exports.VREffect = function VREffect(renderer, onError) {\n\n\tvar vrDisplay, vrDisplays;\n\tvar eyeTranslationL = new THREE.Vector3();\n\tvar eyeTranslationR = new THREE.Vector3();\n\tvar renderRectL, renderRectR;\n\n\tvar frameData = null;\n\n\tif ('VRFrameData' in window) {\n\n\t\tframeData = new VRFrameData();\n\t}\n\n\tfunction gotVRDisplays(displays) {\n\n\t\tvrDisplays = displays;\n\n\t\tif (displays.length > 0) {\n\n\t\t\tvrDisplay = displays[0];\n\t\t} else {\n\n\t\t\tif (onError) onError('HMD not available');\n\t\t}\n\t}\n\n\tif (navigator.getVRDisplays) {\n\n\t\tnavigator.getVRDisplays().then(gotVRDisplays).catch(function () {\n\n\t\t\tconsole.warn('THREE.VREffect: Unable to get VR Displays');\n\t\t});\n\t}\n\n\t//\n\n\tthis.isPresenting = false;\n\tthis.scale = 1;\n\n\tvar scope = this;\n\n\tvar rendererSize = renderer.getSize();\n\tvar rendererUpdateStyle = false;\n\tvar rendererPixelRatio = renderer.getPixelRatio();\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\t};\n\n\tthis.setVRDisplay = function (value) {\n\n\t\tvrDisplay = value;\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\tconsole.warn('THREE.VREffect: getVRDisplays() is being deprecated.');\n\t\treturn vrDisplays;\n\t};\n\n\tthis.setSize = function (width, height, updateStyle) {\n\n\t\trendererSize = { width: width, height: height };\n\t\trendererUpdateStyle = updateStyle;\n\n\t\tif (scope.isPresenting) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters('left');\n\t\t\trenderer.setPixelRatio(1);\n\t\t\trenderer.setSize(eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false);\n\t\t} else {\n\n\t\t\trenderer.setPixelRatio(rendererPixelRatio);\n\t\t\trenderer.setSize(width, height, updateStyle);\n\t\t}\n\t};\n\n\t// fullscreen\n\n\tvar canvas = renderer.domElement;\n\tvar requestFullscreen;\n\tvar exitFullscreen;\n\tvar fullscreenElement;\n\tvar defaultLeftBounds = [0.0, 0.0, 0.5, 1.0];\n\tvar defaultRightBounds = [0.5, 0.0, 0.5, 1.0];\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tvar wasPresenting = scope.isPresenting;\n\t\tscope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;\n\n\t\tif (scope.isPresenting) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters('left');\n\t\t\tvar eyeWidth = eyeParamsL.renderWidth;\n\t\t\tvar eyeHeight = eyeParamsL.renderHeight;\n\n\t\t\tif (!wasPresenting) {\n\n\t\t\t\trendererPixelRatio = renderer.getPixelRatio();\n\t\t\t\trendererSize = renderer.getSize();\n\n\t\t\t\trenderer.setPixelRatio(1);\n\t\t\t\trenderer.setSize(eyeWidth * 2, eyeHeight, false);\n\t\t\t}\n\t\t} else if (wasPresenting) {\n\n\t\t\trenderer.setPixelRatio(rendererPixelRatio);\n\t\t\trenderer.setSize(rendererSize.width, rendererSize.height, rendererUpdateStyle);\n\t\t}\n\t}\n\n\twindow.addEventListener('vrdisplaypresentchange', onVRDisplayPresentChange, false);\n\n\tthis.setFullScreen = function (boolean) {\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (vrDisplay === undefined) {\n\n\t\t\t\treject(new Error('No VR hardware found.'));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (scope.isPresenting === boolean) {\n\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (boolean) {\n\n\t\t\t\tresolve(vrDisplay.requestPresent([{ source: canvas }]));\n\t\t\t} else {\n\n\t\t\t\tresolve(vrDisplay.exitPresent());\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.requestPresent = function () {\n\n\t\treturn this.setFullScreen(true);\n\t};\n\n\tthis.exitPresent = function () {\n\n\t\treturn this.setFullScreen(false);\n\t};\n\n\tthis.requestAnimationFrame = function (f) {\n\n\t\tif (vrDisplay !== undefined) {\n\n\t\t\treturn vrDisplay.requestAnimationFrame(f);\n\t\t} else {\n\n\t\t\treturn window.requestAnimationFrame(f);\n\t\t}\n\t};\n\n\tthis.cancelAnimationFrame = function (h) {\n\n\t\tif (vrDisplay !== undefined) {\n\n\t\t\tvrDisplay.cancelAnimationFrame(h);\n\t\t} else {\n\n\t\t\twindow.cancelAnimationFrame(h);\n\t\t}\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif (vrDisplay !== undefined && scope.isPresenting) {\n\n\t\t\tvrDisplay.submitFrame();\n\t\t}\n\t};\n\n\tthis.autoSubmitFrame = true;\n\n\t// render\n\n\tvar cameraL = new THREE.PerspectiveCamera();\n\tcameraL.layers.enable(1);\n\n\tvar cameraR = new THREE.PerspectiveCamera();\n\tcameraR.layers.enable(2);\n\n\tthis.render = function (scene, camera, renderTarget, forceClear) {\n\n\t\tif (vrDisplay && scope.isPresenting) {\n\n\t\t\tvar autoUpdate = scene.autoUpdate;\n\n\t\t\tif (autoUpdate) {\n\n\t\t\t\tscene.updateMatrixWorld();\n\t\t\t\tscene.autoUpdate = false;\n\t\t\t}\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters('left');\n\t\t\tvar eyeParamsR = vrDisplay.getEyeParameters('right');\n\n\t\t\teyeTranslationL.fromArray(eyeParamsL.offset);\n\t\t\teyeTranslationR.fromArray(eyeParamsR.offset);\n\n\t\t\tif (Array.isArray(scene)) {\n\n\t\t\t\tconsole.warn('THREE.VREffect.render() no longer supports arrays. Use object.layers instead.');\n\t\t\t\tscene = scene[0];\n\t\t\t}\n\n\t\t\t// When rendering we don't care what the recommended size is, only what the actual size\n\t\t\t// of the backbuffer is.\n\t\t\tvar size = renderer.getSize();\n\t\t\tvar layers = vrDisplay.getLayers();\n\t\t\tvar leftBounds;\n\t\t\tvar rightBounds;\n\n\t\t\tif (layers.length) {\n\n\t\t\t\tvar layer = layers[0];\n\n\t\t\t\tleftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;\n\t\t\t\trightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;\n\t\t\t} else {\n\n\t\t\t\tleftBounds = defaultLeftBounds;\n\t\t\t\trightBounds = defaultRightBounds;\n\t\t\t}\n\n\t\t\trenderRectL = {\n\t\t\t\tx: Math.round(size.width * leftBounds[0]),\n\t\t\t\ty: Math.round(size.height * leftBounds[1]),\n\t\t\t\twidth: Math.round(size.width * leftBounds[2]),\n\t\t\t\theight: Math.round(size.height * leftBounds[3])\n\t\t\t};\n\t\t\trenderRectR = {\n\t\t\t\tx: Math.round(size.width * rightBounds[0]),\n\t\t\t\ty: Math.round(size.height * rightBounds[1]),\n\t\t\t\twidth: Math.round(size.width * rightBounds[2]),\n\t\t\t\theight: Math.round(size.height * rightBounds[3])\n\t\t\t};\n\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderer.setRenderTarget(renderTarget);\n\t\t\t\trenderTarget.scissorTest = true;\n\t\t\t} else {\n\n\t\t\t\trenderer.setRenderTarget(null);\n\t\t\t\trenderer.setScissorTest(true);\n\t\t\t}\n\n\t\t\tif (renderer.autoClear || forceClear) renderer.clear();\n\n\t\t\tif (camera.parent === null) camera.updateMatrixWorld();\n\n\t\t\tcamera.matrixWorld.decompose(cameraL.position, cameraL.quaternion, cameraL.scale);\n\t\t\tcamera.matrixWorld.decompose(cameraR.position, cameraR.quaternion, cameraR.scale);\n\n\t\t\tvar scale = this.scale;\n\t\t\tcameraL.translateOnAxis(eyeTranslationL, scale);\n\t\t\tcameraR.translateOnAxis(eyeTranslationR, scale);\n\n\t\t\tif (vrDisplay.getFrameData) {\n\n\t\t\t\tvrDisplay.depthNear = camera.near;\n\t\t\t\tvrDisplay.depthFar = camera.far;\n\n\t\t\t\tvrDisplay.getFrameData(frameData);\n\n\t\t\t\tcameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;\n\t\t\t\tcameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;\n\t\t\t} else {\n\n\t\t\t\tcameraL.projectionMatrix = fovToProjection(eyeParamsL.fieldOfView, true, camera.near, camera.far);\n\t\t\t\tcameraR.projectionMatrix = fovToProjection(eyeParamsR.fieldOfView, true, camera.near, camera.far);\n\t\t\t}\n\n\t\t\t// render left eye\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t\trenderTarget.scissor.set(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t\trenderer.setScissor(renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height);\n\t\t\t}\n\t\t\trenderer.render(scene, cameraL, renderTarget, forceClear);\n\n\t\t\t// render right eye\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t\trenderTarget.scissor.set(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t\trenderer.setScissor(renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height);\n\t\t\t}\n\t\t\trenderer.render(scene, cameraR, renderTarget, forceClear);\n\n\t\t\tif (renderTarget) {\n\n\t\t\t\trenderTarget.viewport.set(0, 0, size.width, size.height);\n\t\t\t\trenderTarget.scissor.set(0, 0, size.width, size.height);\n\t\t\t\trenderTarget.scissorTest = false;\n\t\t\t\trenderer.setRenderTarget(null);\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport(0, 0, size.width, size.height);\n\t\t\t\trenderer.setScissorTest(false);\n\t\t\t}\n\n\t\t\tif (autoUpdate) {\n\n\t\t\t\tscene.autoUpdate = true;\n\t\t\t}\n\n\t\t\tif (scope.autoSubmitFrame) {\n\n\t\t\t\tscope.submitFrame();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Regular render mode if not HMD\n\n\t\trenderer.render(scene, camera, renderTarget, forceClear);\n\t};\n\n\tthis.dispose = function () {\n\n\t\twindow.removeEventListener('vrdisplaypresentchange', onVRDisplayPresentChange, false);\n\t};\n\n\t//\n\n\tfunction fovToNDCScaleOffset(fov) {\n\n\t\tvar pxscale = 2.0 / (fov.leftTan + fov.rightTan);\n\t\tvar pxoffset = (fov.leftTan - fov.rightTan) * pxscale * 0.5;\n\t\tvar pyscale = 2.0 / (fov.upTan + fov.downTan);\n\t\tvar pyoffset = (fov.upTan - fov.downTan) * pyscale * 0.5;\n\t\treturn { scale: [pxscale, pyscale], offset: [pxoffset, pyoffset] };\n\t}\n\n\tfunction fovPortToProjection(fov, rightHanded, zNear, zFar) {\n\n\t\trightHanded = rightHanded === undefined ? true : rightHanded;\n\t\tzNear = zNear === undefined ? 0.01 : zNear;\n\t\tzFar = zFar === undefined ? 10000.0 : zFar;\n\n\t\tvar handednessScale = rightHanded ? -1.0 : 1.0;\n\n\t\t// start with an identity matrix\n\t\tvar mobj = new THREE.Matrix4();\n\t\tvar m = mobj.elements;\n\n\t\t// and with scale/offset info for normalized device coords\n\t\tvar scaleAndOffset = fovToNDCScaleOffset(fov);\n\n\t\t// X result, map clip edges to [-w,+w]\n\t\tm[0 * 4 + 0] = scaleAndOffset.scale[0];\n\t\tm[0 * 4 + 1] = 0.0;\n\t\tm[0 * 4 + 2] = scaleAndOffset.offset[0] * handednessScale;\n\t\tm[0 * 4 + 3] = 0.0;\n\n\t\t// Y result, map clip edges to [-w,+w]\n\t\t// Y offset is negated because this proj matrix transforms from world coords with Y=up,\n\t\t// but the NDC scaling has Y=down (thanks D3D?)\n\t\tm[1 * 4 + 0] = 0.0;\n\t\tm[1 * 4 + 1] = scaleAndOffset.scale[1];\n\t\tm[1 * 4 + 2] = -scaleAndOffset.offset[1] * handednessScale;\n\t\tm[1 * 4 + 3] = 0.0;\n\n\t\t// Z result (up to the app)\n\t\tm[2 * 4 + 0] = 0.0;\n\t\tm[2 * 4 + 1] = 0.0;\n\t\tm[2 * 4 + 2] = zFar / (zNear - zFar) * -handednessScale;\n\t\tm[2 * 4 + 3] = zFar * zNear / (zNear - zFar);\n\n\t\t// W result (= Z in)\n\t\tm[3 * 4 + 0] = 0.0;\n\t\tm[3 * 4 + 1] = 0.0;\n\t\tm[3 * 4 + 2] = handednessScale;\n\t\tm[3 * 4 + 3] = 0.0;\n\n\t\tmobj.transpose();\n\n\t\treturn mobj;\n\t}\n\n\tfunction fovToProjection(fov, rightHanded, zNear, zFar) {\n\n\t\tvar DEG2RAD = Math.PI / 180.0;\n\n\t\tvar fovPort = {\n\t\t\tupTan: Math.tan(fov.upDegrees * DEG2RAD),\n\t\t\tdownTan: Math.tan(fov.downDegrees * DEG2RAD),\n\t\t\tleftTan: Math.tan(fov.leftDegrees * DEG2RAD),\n\t\t\trightTan: Math.tan(fov.rightDegrees * DEG2RAD)\n\t\t};\n\n\t\treturn fovPortToProjection(fovPort, rightHanded, zNear, zFar);\n\t}\n};\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n\tvalue: true\n});\n/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Based on @tojiro's vr-samples-utils.js\n */\n\nvar WEBVR = exports.WEBVR = {\n\n\tisAvailable: function isAvailable() {\n\n\t\tconsole.warn('WEBVR: isAvailable() is being deprecated. Use .checkAvailability() instead.');\n\t\treturn navigator.getVRDisplays !== undefined;\n\t},\n\n\tcheckAvailability: function checkAvailability() {\n\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (navigator.getVRDisplays !== undefined) {\n\n\t\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\n\t\t\t\t\tif (displays.length === 0) {\n\n\t\t\t\t\t\treject('WebVR supported, but no VRDisplays found.');\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\n\t\t\t\treject('Your browser does not support WebVR. See <a href=\"https://webvr.info\">webvr.info</a> for assistance.');\n\t\t\t}\n\t\t});\n\t},\n\n\tgetVRDisplay: function getVRDisplay(onDisplay) {\n\n\t\tif ('getVRDisplays' in navigator) {\n\n\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\t\t\t\tonDisplay(displays[0]);\n\t\t\t});\n\t\t}\n\t},\n\n\tgetMessage: function getMessage() {\n\n\t\tconsole.warn('WEBVR: getMessage() is being deprecated. Use .getMessageContainer( message ) instead.');\n\n\t\tvar message;\n\n\t\tif (navigator.getVRDisplays) {\n\n\t\t\tnavigator.getVRDisplays().then(function (displays) {\n\n\t\t\t\tif (displays.length === 0) message = 'WebVR supported, but no VRDisplays found.';\n\t\t\t});\n\t\t} else {\n\n\t\t\tmessage = 'Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.';\n\t\t}\n\n\t\tif (message !== undefined) {\n\n\t\t\tvar container = document.createElement('div');\n\t\t\tcontainer.style.position = 'absolute';\n\t\t\tcontainer.style.left = '0';\n\t\t\tcontainer.style.top = '0';\n\t\t\tcontainer.style.right = '0';\n\t\t\tcontainer.style.zIndex = '999';\n\t\t\tcontainer.align = 'center';\n\n\t\t\tvar error = document.createElement('div');\n\t\t\terror.style.fontFamily = 'sans-serif';\n\t\t\terror.style.fontSize = '16px';\n\t\t\terror.style.fontStyle = 'normal';\n\t\t\terror.style.lineHeight = '26px';\n\t\t\terror.style.backgroundColor = '#fff';\n\t\t\terror.style.color = '#000';\n\t\t\terror.style.padding = '10px 20px';\n\t\t\terror.style.margin = '50px';\n\t\t\terror.style.display = 'inline-block';\n\t\t\terror.innerHTML = message;\n\t\t\tcontainer.appendChild(error);\n\n\t\t\treturn container;\n\t\t}\n\t},\n\n\tgetMessageContainer: function getMessageContainer(message) {\n\n\t\tvar container = document.createElement('div');\n\t\tcontainer.style.position = 'absolute';\n\t\tcontainer.style.left = '0';\n\t\tcontainer.style.top = '0';\n\t\tcontainer.style.right = '0';\n\t\tcontainer.style.zIndex = '999';\n\t\tcontainer.align = 'center';\n\n\t\tvar error = document.createElement('div');\n\t\terror.style.fontFamily = 'sans-serif';\n\t\terror.style.fontSize = '16px';\n\t\terror.style.fontStyle = 'normal';\n\t\terror.style.lineHeight = '26px';\n\t\terror.style.backgroundColor = '#fff';\n\t\terror.style.color = '#000';\n\t\terror.style.padding = '10px 20px';\n\t\terror.style.margin = '50px';\n\t\terror.style.display = 'inline-block';\n\t\terror.innerHTML = message;\n\t\tcontainer.appendChild(error);\n\n\t\treturn container;\n\t},\n\n\tgetButton: function getButton(display, canvas) {\n\n\t\tif ('VREffect' in THREE && display instanceof THREE.VREffect) {\n\n\t\t\tconsole.error('WebVR.getButton() now expects a VRDisplay.');\n\t\t\treturn document.createElement('button');\n\t\t}\n\n\t\tvar button = document.createElement('button');\n\t\tbutton.style.position = 'absolute';\n\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\tbutton.style.bottom = '20px';\n\t\tbutton.style.width = '100px';\n\t\tbutton.style.border = '0';\n\t\tbutton.style.padding = '8px';\n\t\tbutton.style.cursor = 'pointer';\n\t\tbutton.style.backgroundColor = '#000';\n\t\tbutton.style.color = '#fff';\n\t\tbutton.style.fontFamily = 'sans-serif';\n\t\tbutton.style.fontSize = '13px';\n\t\tbutton.style.fontStyle = 'normal';\n\t\tbutton.style.textAlign = 'center';\n\t\tbutton.style.zIndex = '999';\n\n\t\tif (display) {\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tdisplay.isPresenting ? display.exitPresent() : display.requestPresent([{ source: canvas }]);\n\t\t\t};\n\n\t\t\twindow.addEventListener('vrdisplaypresentchange', function () {\n\n\t\t\t\tbutton.textContent = display.isPresenting ? 'EXIT VR' : 'ENTER VR';\n\t\t\t}, false);\n\t\t} else {\n\n\t\t\tbutton.textContent = 'NO VR DISPLAY';\n\t\t}\n\n\t\treturn button;\n\t}\n\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.VRControls = exports.VRModule = undefined;\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _whs = __webpack_require__(3);\n\nvar _VREffect = __webpack_require__(1);\n\nvar _VRControls = __webpack_require__(0);\n\nvar _WebVR = __webpack_require__(2);\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar VRModule = function () {\n  function VRModule() {\n    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n    _classCallCheck(this, VRModule);\n\n    this.params = Object.assign(params, {\n      message: true,\n      button: true\n    });\n\n    this.scene = null;\n    this.camera = null;\n    this.effect = null;\n  }\n\n  _createClass(VRModule, [{\n    key: 'manager',\n    value: function manager(_manager) {\n      var _this = this;\n\n      _manager.define('vr');\n\n      var rendering = _manager.use('rendering');\n      var renderer = _manager.get('renderer');\n\n      var resize = _manager.use('resize');\n\n      this.effect = new _VREffect.VREffect(renderer);\n\n      this.scene = _manager.get('scene');\n      this.camera = _manager.get('camera');\n\n      rendering.effect(this.effect);\n\n      // TODO: Fix resize.\n\n      resize.addCallback(function (width, height) {\n        _this.effect.setSize(+width, +height);\n      });\n\n      // WEBVR\n      var _params = this.params,\n          message = _params.message,\n          button = _params.button;\n\n\n      if (message) _WebVR.WEBVR.checkAvailability().catch(function (message) {\n        document.body.appendChild(_WebVR.WEBVR.getMessageContainer(message));\n      });\n\n      if (button) _WebVR.WEBVR.getVRDisplay(function (display) {\n        document.body.appendChild(_WebVR.WEBVR.getButton(display, renderer.domElement));\n      });\n    }\n  }]);\n\n  return VRModule;\n}();\n\nexports.VRModule = VRModule;\n\nvar VRControls = exports.VRControls = function (_ControlsModule) {\n  _inherits(VRControls, _ControlsModule);\n\n  function VRControls(_ref) {\n    var object = _ref.object,\n        onError = _ref.onError,\n        intensity = _ref.intensity;\n\n    _classCallCheck(this, VRControls);\n\n    var controls = new _VRControls.VRControls(object.native, onError);\n\n    controls.standing = true;\n    controls.scale = intensity;\n\n    return _possibleConstructorReturn(this, (VRControls.__proto__ || Object.getPrototypeOf(VRControls)).call(this, { controls: controls }));\n  }\n\n  return VRControls;\n}(_whs.ControlsModule);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// VRKit.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d0409895bef851d75762","/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n */\n\nexport const VRControls = function ( object, onError ) {\n\n\tvar scope = this;\n\n\tvar vrDisplay, vrDisplays;\n\n\tvar standingMatrix = new THREE.Matrix4();\n\n\tvar frameData = null;\n\n\tif ( 'VRFrameData' in window ) {\n\n\t\tframeData = new VRFrameData();\n\n\t}\n\n\tfunction gotVRDisplays( displays ) {\n\n\t\tvrDisplays = displays;\n\n\t\tif ( displays.length > 0 ) {\n\n\t\t\tvrDisplay = displays[ 0 ];\n\n\t\t} else {\n\n\t\t\tif ( onError ) onError( 'VR input not available.' );\n\n\t\t}\n\n\t}\n\n\tif ( navigator.getVRDisplays ) {\n\n\t\tnavigator.getVRDisplays().then( gotVRDisplays ).catch( function () {\n\n\t\t\tconsole.warn( 'THREE.VRControls: Unable to get VR Displays' );\n\n\t\t} );\n\n\t}\n\n\t// the Rift SDK returns the position in meters\n\t// this scale factor allows the user to define how meters\n\t// are converted to scene units.\n\n\tthis.scale = 1;\n\n\t// If true will use \"standing space\" coordinate system where y=0 is the\n\t// floor and x=0, z=0 is the center of the room.\n\tthis.standing = false;\n\n\t// Distance from the users eyes to the floor in meters. Used when\n\t// standing=true but the VRDisplay doesn't provide stageParameters.\n\tthis.userHeight = 1.6;\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\n\t};\n\n\tthis.setVRDisplay = function ( value ) {\n\n\t\tvrDisplay = value;\n\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\tconsole.warn( 'THREE.VRControls: getVRDisplays() is being deprecated.' );\n\t\treturn vrDisplays;\n\n\t};\n\n\tthis.getStandingMatrix = function () {\n\n\t\treturn standingMatrix;\n\n\t};\n\n\tthis.update = function () {\n\n\t\tif ( vrDisplay ) {\n\n\t\t\tvar pose;\n\n\t\t\tif ( vrDisplay.getFrameData ) {\n\n\t\t\t\tvrDisplay.getFrameData( frameData );\n\t\t\t\tpose = frameData.pose;\n\n\t\t\t} else if ( vrDisplay.getPose ) {\n\n\t\t\t\tpose = vrDisplay.getPose();\n\n\t\t\t}\n\n\t\t\tif ( pose.orientation !== null ) {\n\n\t\t\t\tobject.quaternion.fromArray( pose.orientation );\n\n\t\t\t}\n\n\t\t\tif ( pose.position !== null ) {\n\n\t\t\t\tobject.position.fromArray( pose.position );\n\n\t\t\t} else {\n\n\t\t\t\tobject.position.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tif ( this.standing ) {\n\n\t\t\t\tif ( vrDisplay.stageParameters ) {\n\n\t\t\t\t\tobject.updateMatrix();\n\n\t\t\t\t\tstandingMatrix.fromArray( vrDisplay.stageParameters.sittingToStandingTransform );\n\t\t\t\t\tobject.applyMatrix( standingMatrix );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobject.position.setY( object.position.y + this.userHeight );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobject.position.multiplyScalar( scope.scale );\n\n\t\t}\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\tvrDisplay = null;\n\n\t};\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/VRControls.js","/**\n * @author dmarcos / https://github.com/dmarcos\n * @author mrdoob / http://mrdoob.com\n *\n * WebVR Spec: http://mozvr.github.io/webvr-spec/webvr.html\n *\n * Firefox: http://mozvr.com/downloads/\n * Chromium: https://webvr.info/get-chrome\n *\n */\n\nexport const VREffect = function ( renderer, onError ) {\n\n\tvar vrDisplay, vrDisplays;\n\tvar eyeTranslationL = new THREE.Vector3();\n\tvar eyeTranslationR = new THREE.Vector3();\n\tvar renderRectL, renderRectR;\n\n\tvar frameData = null;\n\n\tif ( 'VRFrameData' in window ) {\n\n\t\tframeData = new VRFrameData();\n\n\t}\n\n\tfunction gotVRDisplays( displays ) {\n\n\t\tvrDisplays = displays;\n\n\t\tif ( displays.length > 0 ) {\n\n\t\t\tvrDisplay = displays[ 0 ];\n\n\t\t} else {\n\n\t\t\tif ( onError ) onError( 'HMD not available' );\n\n\t\t}\n\n\t}\n\n\tif ( navigator.getVRDisplays ) {\n\n\t\tnavigator.getVRDisplays().then( gotVRDisplays ).catch ( function () {\n\n\t\t\tconsole.warn( 'THREE.VREffect: Unable to get VR Displays' );\n\n\t\t} );\n\n\t}\n\n\t//\n\n\tthis.isPresenting = false;\n\tthis.scale = 1;\n\n\tvar scope = this;\n\n\tvar rendererSize = renderer.getSize();\n\tvar rendererUpdateStyle = false;\n\tvar rendererPixelRatio = renderer.getPixelRatio();\n\n\tthis.getVRDisplay = function () {\n\n\t\treturn vrDisplay;\n\n\t};\n\n\tthis.setVRDisplay = function ( value ) {\n\n\t\tvrDisplay = value;\n\n\t};\n\n\tthis.getVRDisplays = function () {\n\n\t\tconsole.warn( 'THREE.VREffect: getVRDisplays() is being deprecated.' );\n\t\treturn vrDisplays;\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\trendererSize = { width: width, height: height };\n\t\trendererUpdateStyle = updateStyle;\n\n\t\tif ( scope.isPresenting ) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\trenderer.setPixelRatio( 1 );\n\t\t\trenderer.setSize( eyeParamsL.renderWidth * 2, eyeParamsL.renderHeight, false );\n\n\t\t} else {\n\n\t\t\trenderer.setPixelRatio( rendererPixelRatio );\n\t\t\trenderer.setSize( width, height, updateStyle );\n\n\t\t}\n\n\t};\n\n\t// fullscreen\n\n\tvar canvas = renderer.domElement;\n\tvar requestFullscreen;\n\tvar exitFullscreen;\n\tvar fullscreenElement;\n\tvar defaultLeftBounds = [ 0.0, 0.0, 0.5, 1.0 ];\n\tvar defaultRightBounds = [ 0.5, 0.0, 0.5, 1.0 ];\n\n\tfunction onVRDisplayPresentChange() {\n\n\t\tvar wasPresenting = scope.isPresenting;\n\t\tscope.isPresenting = vrDisplay !== undefined && vrDisplay.isPresenting;\n\n\t\tif ( scope.isPresenting ) {\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\tvar eyeWidth = eyeParamsL.renderWidth;\n\t\t\tvar eyeHeight = eyeParamsL.renderHeight;\n\n\t\t\tif ( !wasPresenting ) {\n\n\t\t\t\trendererPixelRatio = renderer.getPixelRatio();\n\t\t\t\trendererSize = renderer.getSize();\n\n\t\t\t\trenderer.setPixelRatio( 1 );\n\t\t\t\trenderer.setSize( eyeWidth * 2, eyeHeight, false );\n\n\t\t\t}\n\n\t\t} else if ( wasPresenting ) {\n\n\t\t\trenderer.setPixelRatio( rendererPixelRatio );\n\t\t\trenderer.setSize( rendererSize.width, rendererSize.height, rendererUpdateStyle );\n\n\t\t}\n\n\t}\n\n\twindow.addEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\tthis.setFullScreen = function ( boolean ) {\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tif ( vrDisplay === undefined ) {\n\n\t\t\t\treject( new Error( 'No VR hardware found.' ) );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( scope.isPresenting === boolean ) {\n\n\t\t\t\tresolve();\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( boolean ) {\n\n\t\t\t\tresolve( vrDisplay.requestPresent( [ { source: canvas } ] ) );\n\n\t\t\t} else {\n\n\t\t\t\tresolve( vrDisplay.exitPresent() );\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\tthis.requestPresent = function () {\n\n\t\treturn this.setFullScreen( true );\n\n\t};\n\n\tthis.exitPresent = function () {\n\n\t\treturn this.setFullScreen( false );\n\n\t};\n\n\tthis.requestAnimationFrame = function ( f ) {\n\n\t\tif ( vrDisplay !== undefined ) {\n\n\t\t\treturn vrDisplay.requestAnimationFrame( f );\n\n\t\t} else {\n\n\t\t\treturn window.requestAnimationFrame( f );\n\n\t\t}\n\n\t};\n\n\tthis.cancelAnimationFrame = function ( h ) {\n\n\t\tif ( vrDisplay !== undefined ) {\n\n\t\t\tvrDisplay.cancelAnimationFrame( h );\n\n\t\t} else {\n\n\t\t\twindow.cancelAnimationFrame( h );\n\n\t\t}\n\n\t};\n\n\tthis.submitFrame = function () {\n\n\t\tif ( vrDisplay !== undefined && scope.isPresenting ) {\n\n\t\t\tvrDisplay.submitFrame();\n\n\t\t}\n\n\t};\n\n\tthis.autoSubmitFrame = true;\n\n\t// render\n\n\tvar cameraL = new THREE.PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\n\tvar cameraR = new THREE.PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\n\tthis.render = function ( scene, camera, renderTarget, forceClear ) {\n\n\t\tif ( vrDisplay && scope.isPresenting ) {\n\n\t\t\tvar autoUpdate = scene.autoUpdate;\n\n\t\t\tif ( autoUpdate ) {\n\n\t\t\t\tscene.updateMatrixWorld();\n\t\t\t\tscene.autoUpdate = false;\n\n\t\t\t}\n\n\t\t\tvar eyeParamsL = vrDisplay.getEyeParameters( 'left' );\n\t\t\tvar eyeParamsR = vrDisplay.getEyeParameters( 'right' );\n\n\t\t\teyeTranslationL.fromArray( eyeParamsL.offset );\n\t\t\teyeTranslationR.fromArray( eyeParamsR.offset );\n\n\t\t\tif ( Array.isArray( scene ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.VREffect.render() no longer supports arrays. Use object.layers instead.' );\n\t\t\t\tscene = scene[ 0 ];\n\n\t\t\t}\n\n\t\t\t// When rendering we don't care what the recommended size is, only what the actual size\n\t\t\t// of the backbuffer is.\n\t\t\tvar size = renderer.getSize();\n\t\t\tvar layers = vrDisplay.getLayers();\n\t\t\tvar leftBounds;\n\t\t\tvar rightBounds;\n\n\t\t\tif ( layers.length ) {\n\n\t\t\t\tvar layer = layers[ 0 ];\n\n\t\t\t\tleftBounds = layer.leftBounds !== null && layer.leftBounds.length === 4 ? layer.leftBounds : defaultLeftBounds;\n\t\t\t\trightBounds = layer.rightBounds !== null && layer.rightBounds.length === 4 ? layer.rightBounds : defaultRightBounds;\n\n\t\t\t} else {\n\n\t\t\t\tleftBounds = defaultLeftBounds;\n\t\t\t\trightBounds = defaultRightBounds;\n\n\t\t\t}\n\n\t\t\trenderRectL = {\n\t\t\t\tx: Math.round( size.width * leftBounds[ 0 ] ),\n\t\t\t\ty: Math.round( size.height * leftBounds[ 1 ] ),\n\t\t\t\twidth: Math.round( size.width * leftBounds[ 2 ] ),\n\t\t\t\theight: Math.round(size.height * leftBounds[ 3 ] )\n\t\t\t};\n\t\t\trenderRectR = {\n\t\t\t\tx: Math.round( size.width * rightBounds[ 0 ] ),\n\t\t\t\ty: Math.round( size.height * rightBounds[ 1 ] ),\n\t\t\t\twidth: Math.round( size.width * rightBounds[ 2 ] ),\n\t\t\t\theight: Math.round(size.height * rightBounds[ 3 ] )\n\t\t\t};\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderer.setRenderTarget( renderTarget );\n\t\t\t\trenderTarget.scissorTest = true;\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setRenderTarget( null );\n\t\t\t\trenderer.setScissorTest( true );\n\n\t\t\t}\n\n\t\t\tif ( renderer.autoClear || forceClear ) renderer.clear();\n\n\t\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\t\tcamera.matrixWorld.decompose( cameraL.position, cameraL.quaternion, cameraL.scale );\n\t\t\tcamera.matrixWorld.decompose( cameraR.position, cameraR.quaternion, cameraR.scale );\n\n\t\t\tvar scale = this.scale;\n\t\t\tcameraL.translateOnAxis( eyeTranslationL, scale );\n\t\t\tcameraR.translateOnAxis( eyeTranslationR, scale );\n\n\t\t\tif ( vrDisplay.getFrameData ) {\n\n\t\t\t\tvrDisplay.depthNear = camera.near;\n\t\t\t\tvrDisplay.depthFar = camera.far;\n\n\t\t\t\tvrDisplay.getFrameData( frameData );\n\n\t\t\t\tcameraL.projectionMatrix.elements = frameData.leftProjectionMatrix;\n\t\t\t\tcameraR.projectionMatrix.elements = frameData.rightProjectionMatrix;\n\n\t\t\t} else {\n\n\t\t\t\tcameraL.projectionMatrix = fovToProjection( eyeParamsL.fieldOfView, true, camera.near, camera.far );\n\t\t\t\tcameraR.projectionMatrix = fovToProjection( eyeParamsR.fieldOfView, true, camera.near, camera.far );\n\n\t\t\t}\n\n\t\t\t// render left eye\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\t\t\t\trenderTarget.scissor.set( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\t\t\t\trenderer.setScissor( renderRectL.x, renderRectL.y, renderRectL.width, renderRectL.height );\n\n\t\t\t}\n\t\t\trenderer.render( scene, cameraL, renderTarget, forceClear );\n\n\t\t\t// render right eye\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\t\t\t\trenderTarget.scissor.set( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\t\t\t\trenderer.setScissor( renderRectR.x, renderRectR.y, renderRectR.width, renderRectR.height );\n\n\t\t\t}\n\t\t\trenderer.render( scene, cameraR, renderTarget, forceClear );\n\n\t\t\tif ( renderTarget ) {\n\n\t\t\t\trenderTarget.viewport.set( 0, 0, size.width, size.height );\n\t\t\t\trenderTarget.scissor.set( 0, 0, size.width, size.height );\n\t\t\t\trenderTarget.scissorTest = false;\n\t\t\t\trenderer.setRenderTarget( null );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setViewport( 0, 0, size.width, size.height );\n\t\t\t\trenderer.setScissorTest( false );\n\n\t\t\t}\n\n\t\t\tif ( autoUpdate ) {\n\n\t\t\t\tscene.autoUpdate = true;\n\n\t\t\t}\n\n\t\t\tif ( scope.autoSubmitFrame ) {\n\n\t\t\t\tscope.submitFrame();\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Regular render mode if not HMD\n\n\t\trenderer.render( scene, camera, renderTarget, forceClear );\n\n\t};\n\n\tthis.dispose = function () {\n\n\t\twindow.removeEventListener( 'vrdisplaypresentchange', onVRDisplayPresentChange, false );\n\n\t};\n\n\t//\n\n\tfunction fovToNDCScaleOffset( fov ) {\n\n\t\tvar pxscale = 2.0 / ( fov.leftTan + fov.rightTan );\n\t\tvar pxoffset = ( fov.leftTan - fov.rightTan ) * pxscale * 0.5;\n\t\tvar pyscale = 2.0 / ( fov.upTan + fov.downTan );\n\t\tvar pyoffset = ( fov.upTan - fov.downTan ) * pyscale * 0.5;\n\t\treturn { scale: [ pxscale, pyscale ], offset: [ pxoffset, pyoffset ] };\n\n\t}\n\n\tfunction fovPortToProjection( fov, rightHanded, zNear, zFar ) {\n\n\t\trightHanded = rightHanded === undefined ? true : rightHanded;\n\t\tzNear = zNear === undefined ? 0.01 : zNear;\n\t\tzFar = zFar === undefined ? 10000.0 : zFar;\n\n\t\tvar handednessScale = rightHanded ? - 1.0 : 1.0;\n\n\t\t// start with an identity matrix\n\t\tvar mobj = new THREE.Matrix4();\n\t\tvar m = mobj.elements;\n\n\t\t// and with scale/offset info for normalized device coords\n\t\tvar scaleAndOffset = fovToNDCScaleOffset( fov );\n\n\t\t// X result, map clip edges to [-w,+w]\n\t\tm[ 0 * 4 + 0 ] = scaleAndOffset.scale[ 0 ];\n\t\tm[ 0 * 4 + 1 ] = 0.0;\n\t\tm[ 0 * 4 + 2 ] = scaleAndOffset.offset[ 0 ] * handednessScale;\n\t\tm[ 0 * 4 + 3 ] = 0.0;\n\n\t\t// Y result, map clip edges to [-w,+w]\n\t\t// Y offset is negated because this proj matrix transforms from world coords with Y=up,\n\t\t// but the NDC scaling has Y=down (thanks D3D?)\n\t\tm[ 1 * 4 + 0 ] = 0.0;\n\t\tm[ 1 * 4 + 1 ] = scaleAndOffset.scale[ 1 ];\n\t\tm[ 1 * 4 + 2 ] = - scaleAndOffset.offset[ 1 ] * handednessScale;\n\t\tm[ 1 * 4 + 3 ] = 0.0;\n\n\t\t// Z result (up to the app)\n\t\tm[ 2 * 4 + 0 ] = 0.0;\n\t\tm[ 2 * 4 + 1 ] = 0.0;\n\t\tm[ 2 * 4 + 2 ] = zFar / ( zNear - zFar ) * - handednessScale;\n\t\tm[ 2 * 4 + 3 ] = ( zFar * zNear ) / ( zNear - zFar );\n\n\t\t// W result (= Z in)\n\t\tm[ 3 * 4 + 0 ] = 0.0;\n\t\tm[ 3 * 4 + 1 ] = 0.0;\n\t\tm[ 3 * 4 + 2 ] = handednessScale;\n\t\tm[ 3 * 4 + 3 ] = 0.0;\n\n\t\tmobj.transpose();\n\n\t\treturn mobj;\n\n\t}\n\n\tfunction fovToProjection( fov, rightHanded, zNear, zFar ) {\n\n\t\tvar DEG2RAD = Math.PI / 180.0;\n\n\t\tvar fovPort = {\n\t\t\tupTan: Math.tan( fov.upDegrees * DEG2RAD ),\n\t\t\tdownTan: Math.tan( fov.downDegrees * DEG2RAD ),\n\t\t\tleftTan: Math.tan( fov.leftDegrees * DEG2RAD ),\n\t\t\trightTan: Math.tan( fov.rightDegrees * DEG2RAD )\n\t\t};\n\n\t\treturn fovPortToProjection( fovPort, rightHanded, zNear, zFar );\n\n\t}\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/VREffect.js","/**\n * @author mrdoob / http://mrdoob.com\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Based on @tojiro's vr-samples-utils.js\n */\n\nexport const WEBVR = {\n\n\tisAvailable: function () {\n\n\t\tconsole.warn( 'WEBVR: isAvailable() is being deprecated. Use .checkAvailability() instead.' );\n\t\treturn navigator.getVRDisplays !== undefined;\n\n\t},\n\n\tcheckAvailability: function () {\n\n\t\treturn new Promise( function( resolve, reject ) {\n\n\t\t\tif ( navigator.getVRDisplays !== undefined ) {\n\n\t\t\t\tnavigator.getVRDisplays().then( function ( displays ) {\n\n\t\t\t\t\tif ( displays.length === 0 ) {\n\n\t\t\t\t\t\treject( 'WebVR supported, but no VRDisplays found.' );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tresolve();\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t} else {\n\n\t\t\t\treject( 'Your browser does not support WebVR. See <a href=\"https://webvr.info\">webvr.info</a> for assistance.' );\n\n\t\t\t}\n\n\t\t} );\n\n\t},\n\n\tgetVRDisplay: function ( onDisplay ) {\n\n\t\tif ( 'getVRDisplays' in navigator ) {\n\n\t\t\tnavigator.getVRDisplays()\n\t\t\t\t.then( function ( displays ) {\n\t\t\t\t\tonDisplay( displays[ 0 ] );\n\t\t\t\t} );\n\n\t\t}\n\n\t},\n\n\tgetMessage: function () {\n\n\t\tconsole.warn( 'WEBVR: getMessage() is being deprecated. Use .getMessageContainer( message ) instead.' );\n\n\t\tvar message;\n\n\t\tif ( navigator.getVRDisplays ) {\n\n\t\t\tnavigator.getVRDisplays().then( function ( displays ) {\n\n\t\t\t\tif ( displays.length === 0 ) message = 'WebVR supported, but no VRDisplays found.';\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\tmessage = 'Your browser does not support WebVR. See <a href=\"http://webvr.info\">webvr.info</a> for assistance.';\n\n\t\t}\n\n\t\tif ( message !== undefined ) {\n\n\t\t\tvar container = document.createElement( 'div' );\n\t\t\tcontainer.style.position = 'absolute';\n\t\t\tcontainer.style.left = '0';\n\t\t\tcontainer.style.top = '0';\n\t\t\tcontainer.style.right = '0';\n\t\t\tcontainer.style.zIndex = '999';\n\t\t\tcontainer.align = 'center';\n\n\t\t\tvar error = document.createElement( 'div' );\n\t\t\terror.style.fontFamily = 'sans-serif';\n\t\t\terror.style.fontSize = '16px';\n\t\t\terror.style.fontStyle = 'normal';\n\t\t\terror.style.lineHeight = '26px';\n\t\t\terror.style.backgroundColor = '#fff';\n\t\t\terror.style.color = '#000';\n\t\t\terror.style.padding = '10px 20px';\n\t\t\terror.style.margin = '50px';\n\t\t\terror.style.display = 'inline-block';\n\t\t\terror.innerHTML = message;\n\t\t\tcontainer.appendChild( error );\n\n\t\t\treturn container;\n\n\t\t}\n\n\t},\n\n\tgetMessageContainer: function ( message ) {\n\n\t\tvar container = document.createElement( 'div' );\n\t\tcontainer.style.position = 'absolute';\n\t\tcontainer.style.left = '0';\n\t\tcontainer.style.top = '0';\n\t\tcontainer.style.right = '0';\n\t\tcontainer.style.zIndex = '999';\n\t\tcontainer.align = 'center';\n\n\t\tvar error = document.createElement( 'div' );\n\t\terror.style.fontFamily = 'sans-serif';\n\t\terror.style.fontSize = '16px';\n\t\terror.style.fontStyle = 'normal';\n\t\terror.style.lineHeight = '26px';\n\t\terror.style.backgroundColor = '#fff';\n\t\terror.style.color = '#000';\n\t\terror.style.padding = '10px 20px';\n\t\terror.style.margin = '50px';\n\t\terror.style.display = 'inline-block';\n\t\terror.innerHTML = message;\n\t\tcontainer.appendChild( error );\n\n\t\treturn container;\n\n\t},\n\n\tgetButton: function ( display, canvas ) {\n\n\t\tif ( 'VREffect' in THREE && display instanceof THREE.VREffect ) {\n\n\t\t\tconsole.error( 'WebVR.getButton() now expects a VRDisplay.' );\n\t\t\treturn document.createElement( 'button' );\n\n\t\t}\n\n\t\tvar button = document.createElement( 'button' );\n\t\tbutton.style.position = 'absolute';\n\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\tbutton.style.bottom = '20px';\n\t\tbutton.style.width = '100px';\n\t\tbutton.style.border = '0';\n\t\tbutton.style.padding = '8px';\n\t\tbutton.style.cursor = 'pointer';\n\t\tbutton.style.backgroundColor = '#000';\n\t\tbutton.style.color = '#fff';\n\t\tbutton.style.fontFamily = 'sans-serif';\n\t\tbutton.style.fontSize = '13px';\n\t\tbutton.style.fontStyle = 'normal';\n\t\tbutton.style.textAlign = 'center';\n\t\tbutton.style.zIndex = '999';\n\n\t\tif ( display ) {\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tdisplay.isPresenting ? display.exitPresent() : display.requestPresent( [ { source: canvas } ] );\n\n\t\t\t};\n\n\t\t\twindow.addEventListener( 'vrdisplaypresentchange', function () {\n\n\t\t\t\tbutton.textContent = display.isPresenting ? 'EXIT VR' : 'ENTER VR';\n\n\t\t\t}, false );\n\n\t\t} else {\n\n\t\t\tbutton.textContent = 'NO VR DISPLAY';\n\n\t\t}\n\n\t\treturn button;\n\n\t}\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib/WebVR.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"whs\",\"commonjs2\":\"whs\",\"amd\":\"whs\",\"root\":\"WHS\"}\n// module id = 3\n// module chunks = 0","import {Loop, ControlsModule} from 'whs';\n\nimport {VREffect} from './lib/VREffect';\nimport {VRControls as VRControlsNative} from './lib/VRControls';\nimport {WEBVR} from './lib/WebVR';\n\nexport class VRModule {\n  constructor(params = {}) {\n    this.params = Object.assign(params, {\n      message: true,\n      button: true\n    });\n\n    this.scene = null;\n    this.camera = null;\n    this.effect = null;\n  }\n\n  manager(manager) {\n    manager.define('vr');\n\n    const rendering = manager.use('rendering');\n    const renderer = manager.get('renderer');\n\n    const resize = manager.use('resize');\n\n    this.effect = new VREffect(renderer);\n\n    this.scene = manager.get('scene');\n    this.camera = manager.get('camera');\n\n    rendering.effect(this.effect);\n\n    // TODO: Fix resize.\n\n    resize.addCallback((width, height) => {\n      this.effect.setSize(+width, +height);\n    });\n\n    // WEBVR\n    const {message, button} = this.params;\n\n    if (message) WEBVR.checkAvailability().catch(message => {\n\t\t\tdocument.body.appendChild(WEBVR.getMessageContainer(message));\n\t\t});\n\n    if (button) WEBVR.getVRDisplay(display => {\n      document.body.appendChild(WEBVR.getButton(display, renderer.domElement));\n    });\n  }\n}\n\nexport class VRControls extends ControlsModule {\n  constructor({object, onError, intensity}) {\n    const controls = new VRControlsNative(object.native, onError);\n\n    controls.standing = true;\n    controls.scale = intensity;\n\n    super({controls});\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js"],"sourceRoot":""}